<HTML><HEAD>
<meta charset="utf-8" >
<meta name="viewport" content="width=device-width" >
<link rel="stylesheet" href="../assets/usage.css">
<TITLE>Basic Usage -- ImageMagick Examples</TITLE>
<LINK REL="icon" HREF="../img_www/favicon.ico" type="image/x-icon">
<LINK REL="shortcut" HREF="../img_www/favicon.ico" type="image/x-icon">
<LINK REL="canonical" HREF="https://imagemagick.org/Usage/basics/">
</HEAD><body><main class="container"><div class="magick-template"><div class="magick-header">

<H1>ImageMagick Examples -- <BR>
    <IMG SRC="../img_www/space.gif" width=50 height=1>
    Basic Usage</H1>

<DIV ALIGN=justify>

<B>Index</B><BR>
<TABLE CELLSPACING=0>
<TR valign="top"><TD COLSPAN=2>
<A HREF="../"
   ><IMG SRC="../img_www/granitesm_left.gif" BORDER=0 WIDTH=15 HEIGHT=15
   > ImageMagick Examples Preface and Index</A>
</TD></TR>
<TR VALIGN=middle><TD><DL>

<DD><A HREF="#cmdline"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > ImageMagick Command Line Processing</A>
    <UL>
    <LI><A HREF="#why"
        > Why did Command Line Style Change!</A>
    <LI><A HREF="#syntax"
        > IMv6 command line Syntax</A>
    <LI><A HREF="#options"
        > Operators and Setting Options</A>
        <UL>
        <LI><A HREF="#option_settings"  >Settings</A>:&nbsp;
            <FONT SIZE=-1>
            <A HREF="#option_ops"       >operator</A>,&nbsp;
            <A HREF="#option_in"        >input</A>,&nbsp;
            <A HREF="#option_out"       >output</A>,&nbsp;
            <A HREF="#option_ctrl"      >control</A>
            </FONT>
        <LI><A HREF="#option_operators" >Operators</A>:&nbsp;
            <FONT SIZE=-1>
            <A HREF="#option_create"    >create</A>,&nbsp;
            <A HREF="#option_simple"    >simple</A>,&nbsp;
            <A HREF="#option_list"      >list</A>,&nbsp;
            <A HREF="#option_stack"     >stack</A>,&nbsp;
            <A HREF="#option_misc"      >misc</A>
            </FONT>
        </UL>
    <LI><A HREF="#example"
        > A Working Example of an IM Command</A>
    <LI><A HREF="#legacy"
        > Legacy Command Line Style</A>
    <LI><A HREF="#cmd_vs_api"
        > Command Line (CLI) vs API</A>
    <LI><A HREF="#arguments"
        > Argument Handling</A>
        <UL><FONT SIZE=-1>
            <A HREF="#arg_constant"   >Constant Names</A>,&nbsp;
            <A HREF="#arg_const_list" >Constant List</A>,&nbsp;
            <A HREF="#arg_geometry"   >Geometry Arguments</A>,<BR>
            <A HREF="#arg_list"       >Floating-Point Lists</A>,&nbsp;
            <A HREF="#arg_string"     >Freeform Strings</A>
            </FONT>
        <LI><A HREF="#arg_percent"    >Percent Escapes</A>
        <LI><A HREF="#arg_delayed"    >Delayed Percent Escapes</A>
        </UL>
    </UL>
<DT>&nbsp;
<DD><A HREF="#im_commands"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > ImageMagick Commands</A>
    <UL>
    <LI><A HREF="#convert"
        > Convert -- magick and modify images</A>
    <LI><A HREF="#identify"
        > Identify -- Output information about this image</A>
        <UL>
        <LI><A HREF="#identify_ping"
            > Identify, To Ping or not to Ping!</A>
        <LI><A HREF="#identify_math"
            > Identify as a floating point Calculator</A>
        <LI><A HREF="#identify_cavats"
            > Extra Cavats about Identify</A>
        <LI><A HREF="#identify_alt"
            > Identify Alternatives - Text Output Options</A>
        </UL>
    <LI><A HREF="#mogrify"
        > Mogrify -- in-place batch processing</A>
        <UL>
        <LI><A HREF="#mogrify_compose"
            > Alpha Composition with Mogrify</A>
        <LI><A HREF="#mogrify_convert"
             >Using Convert Instead of Morgify</A>
        <LI><A HREF="#mogrify_not"
            > Batch Processing Alternatives</A>
        </UL>
    <LI><A HREF="#composite"
        > Composite -- overlaying images in special ways</A>
    <LI><A HREF="#montage"
        > Montage -- generating arrays of thumbnails</A>
    <LI><A HREF="#display"
        > Display -- Slideshows of Images</A>
    <LI><A HREF="#animate"
        > Animate -- Show GIF Animations</A>
    <LI><A HREF="#compare"
        > Compare -- Look for Differences</A>
    <LI><A HREF="#stream"
        > Stream -- Pipelined Image Processor</A>
    <LI><A HREF="#import"
        > Import -- Read Images from On-screen Display</A>
    <LI><A HREF="#conjure"
        > Conjure -- Experimental IM Scripting Language</A>
    </UL>

</DL></TD>
<TD><DL>

<DT><A HREF="#image_lists"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > Image Lists</A>
    <UL>
    <LI><A HREF="#parenthesis"
        > Parenthesis -- processing images 'on-the-side'</A>
    <LI><A HREF="#respect-parenthesis"
        > Parenthesis and Settings</A>
    <LI><A HREF="#list_ops"
        > Image List Operators</A>
        <DL><DD>
            <A HREF="#delete"    >-delete</A>,&nbsp;
            <A HREF="#insert"    >-insert</A>,&nbsp;
            <A HREF="#swap"      >-swap</A>,
        <DD><A HREF="#reverse"   >-reverse</A>,&nbsp;
            <A HREF="#clone"     >-clone</A>,&nbsp;
            <A HREF="#duplicate" >-duplicate</A>
        </DL>
    <LI><A HREF="#seq_combine"
        > Combining Image List Operations</A>
    </UL>
<DT><A HREF="#complex"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > Complex Image Processing and Debugging</A>
<DT>&nbsp;
<DT><A HREF="#settings"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > Meta-data: Attributes, Properties and Artifacts</A>
    <UL>
    <LI><A HREF="#attributes"
        >Setting/Changing Image Atrributes</A>
    <LI><A HREF="#virtual_canvas"
        >Virtual Canvas, and the Page and Repage Operators</A>
    <LI><A HREF="#set"
        >Set Per-Image Properties</A>
    <LI><A HREF="#define"
        >Define Global Artifacts</A>
    <LI><A HREF="#type"
       >Image Type when Reading and Writing</A>
    </UL>
<DT>&nbsp;
<DT><A HREF="#image_quality"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > Controling the Quality of Images</A>
    <UL>
    <LI><A HREF="#depth"           >Depth - File Format Bit Depth</A>
    <LI><A HREF="#quality"         >Quality - In Memory Bit Quality</A>
    <LI><A HREF="#hdri"            >HDRI - Floating Point Quality</A>
        <UL>
        <LI><A HREF="#quantum_effects" >Quantum Effects, HDRI vs non-HDRI</A>
        <LI><A HREF="#clamp"           >Clamp image bounds in HDRI</A>
        <LI><A HREF="#hdri_formats"    >HDRI File Formats</A>
        </UL>
    <LI><A HREF="#quality_best"    >What Q-level should I use</A>
    <LI><A HREF="#density"         >Image Density or Resolution</A>
        <UL>
        <LI><A HREF="#density_photoshop" >Photoshop and Density</A>
        </UL>
    <LI><A HREF="#speed"    >Some Speed Tests based on Quality</A>
    </UL>
<DT>&nbsp;
<DT><A HREF="#controls"
    ><IMG SRC="../img_www/granitesm_right.gif" BORDER=0 WIDTH=15 HEIGHT=15
    > ImageMagick Operational Controls</A>

</DL>
</TD></TR></TABLE></P>

Here we explain in detail the command line processing that IM follows, some of
the new image processing abilities, the  ideas, philosophy, and methodology,
and what is actually going on, internally. </P>

With this background knowledge the rest of the examples provided pages becomes
much clearer.  Even if you only use the Application Program Interface (API),
this section is well worth knowing and understanding. </P>

<HR><!-- ---------------------------------------------------------------- -->

<A NAME="cmdline"></A>
<H2>ImageMagick Command Line Processing</H2>

<A NAME="why"></A>
<H3>Why did the command line style change!&nbsp; <FONT SIZE=3>or...</FONT>
<BR>The problem with previous versions of IM</H3>

In previous major version of ImageMagick (version 5.5.7 and earlier) the
command line interface into the IM library has been prone to problems
involving the order in which operations were performed.  It was very
haphazard, and confusing to anyone trying to make sense of what was actually
going on.   Also, what worked one time may not work in the same order another
time, as the author of IM, constantly battled with the interface to get it
to work as people expected. </P>

The cause of the problem was that ImageMagick followed a fairly standard UNIX
command line style...

<DL><DD><PRE><B>
command  [options]  input_image   output_image
</B></PRE></DL></P>

As time went on this started to produce problems, as images are complex
objects with an enormous number of operations that can be performed on them
often involving other images. </P>

As a consequence of this the above slowly expanded to become..

<DL><DD><PRE><B>
command  [options] image1 [options] image2 [options]  output_image
</B></PRE></DL></P>

This worked, and is the basic style that was used in version 5.5.7. </P>

The various image operations such as  "<CODE><A
HREF="../option_link.cgi?negate" >-negate</A></CODE>", "<CODE><A
HREF="../option_link.cgi?resize" >-resize</A></CODE>", and "<CODE><A
HREF="../option_link.cgi?crop" >-crop</A></CODE>", etc, could appear either
before or after the image it was meant to apply to. </P>

For example under version 5.5.7 the following two commands were equally valid
and did the same thing.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -negate  image.gif   output.gif

  magick  image.gif  -negate  output.gif
</samp></pre></TD></TR></TABLE>
</DIV></P>

The problem was what if you were dealing with two image processing operations!
For example...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -size 40x20 xc:red  xc:blue \
          -append   -rotate 90    append_rotate.gif
</samp></pre></TD></TR></TABLE>
</DIV>

<A HREF="append_rotate_bad.gif"
  ><IMG SRC="append_rotate_bad.gif"
        ALIGN=right VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</P>

The result (in IM v5.5.7) was that the two input images were rotated
first, then appended together, producing an image like... </P>

That is the "<CODE><A HREF="../option_link.cgi?rotate" >-rotate</A></CODE>"
operator would be applied BEFORE the  "<CODE><A
HREF="../option_link.cgi?append" >-append</A></CODE>" which is probably not
what the user intended.  </P>

<BR CLEAR=all>

With ImageMagick version 6, the operators will always be applied in the
command line order as given by the user. <BR>

<A HREF="append_rotate.gif"
  ><IMG SRC="append_rotate.gif"
        ALIGN=right VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</P>

As such the previous example in IMv6 will result in: the two images being
appended together <I>first</I>, then that result will be rotated; producing
this...  <BR CLEAR=all></P>

If the user actually intended to do the rotations before the append, he can
explicitly ask IM v6 to do it in that order.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -size 40x20 xc:red  xc:blue \
          -rotate 90  -append    append_rotate_bad.gif
</samp></pre></TD></TR></TABLE>
</DIV></P>

This sort of fine control was just beyond previous versions of IM, and would
probably have required a pipeline, or intermediate save images to achieve it.
</P>

The solution to the problem, unfortunately required a drastic measure and some
incompatibility. On the other hand just about every 'simple' command that
worked in IM version 5 work as you would expect IM version 6. </P>

In essence command line usage in versions before version 6 was ill-defined and
in my thinking broken, producing numerous odd and unexpected results. </P>

<BR>

<A NAME="syntax"></A>
<H3>IMv6 command Syntax</H3>

Note that no 'operation' should be given, before at least one image is either
read in or created.  In fact you may like to consider a 'image read/create'
also as an operation as well. Afetr all it really is image processing
operation, that of translate an image in a file to an image in memory.  </P>

So the correct way to do this in IMv6 is to read the image, process and then
use the final 'implicit write' argument to write out the result.  That is..

<DL><DD><PRE><B>
command  "image" { -operation }... "output_image"
</B></PRE></DL></P>

Of course there are some settings that may be need to control the image
reading which need to be given before actually reading the image (see below
for the meaning of a setting).  As such <B>IMv6 syntax</B> basically follows
the following...

<DL><DD><PRE><B>
command { [settings] [operation] }...  "implict_write"
</B></PRE></DL></P>

With the part in '<CODE>{...}</CODE>' being repeated with as many 'reads' or
'operations' you want or need. And '<CODE>[operation]</CODE>' being either
an image read or create, or image processing operation that actually 'does
something'.  And you would do them in the exact order you want to process the
images. </P>


<BR>

<A NAME="options"></A>
<H3>Types of Options - Operators and Settings...</H3>

A summary of the following is now also available from the <A
HREF="https://imagemagick.org/" >ImageMagick Website</A> on <A
HREF="https://imagemagick.org/script/command-line-processing.php" >The
Anatomy of the Command Line</A>. </P>

All command line options will now fall into two basic groups: 'settings' and
'image operators'.  Settings set values, Operators actually preform some
action.  </P>

<TABLE WIDTH=90% ALIGN=center>
<TR><TD COLSPAN=2><A NAME="option_settings"></A><B>Setting Options</B>
<TR><TD WIDTH=50><TD ALIGN=justify>
    are command line options that only save information, that will be used
    later by other 'image operators'.  That is they do not do anything, except
    set some value, to be used later.

    Many of the options have both a '<CODE>-</CODE>' and a '<CODE>+</CODE>'
    style. The latter is generally used to turn off the setting, or reset it
    to its normal default state.  This allow you remove the effect of a
    setting quickly and simply. </P>

    For example "<CODE><A HREF="../option_link.cgi?gravity"
    >+gravity</A></CODE>" will return the gravity setting to the initial
    'gravity none' state.

    Settings can be further divided into a number of sub-categories... </P>

    <A NAME="option_ops"></A>
    <B>Operator Settings</B> which control how later operators function.
    They set the colors, and fonts that may be used by an operator,  control
    placement of images and text, the lookup of color from source images,
    control the method of processing by some of the more complex operators,
    etc., etc., etc..

    <BLOCKQUOTE><CODE>
    -dither&nbsp; -gravity&nbsp; -fill&nbsp; -background&nbsp;
    -bordercolor&nbsp; -stroke&nbsp; -font&nbsp; -pointsize&nbsp;
    -strokewidth&nbsp; -box&nbsp; -virtual-pixel&nbsp; -interpolate&nbsp;
    </CODE></BLOCKQUOTE></P>

    Most setting options belong to this category. </P>

    <A NAME="option_in"></A>
    <B>Input Settings</B> are specifically restricted to controlling the
    creation of images that are created or read in.  Typically they are used
    to assign or override specific meta-data that is to be associated with the
    image(s) created after that setting was defined. </P>
    they are created or read in from an external file. </P>

    <BLOCKQUOTE><CODE>
    -label&nbsp; -delay&nbsp; -dispose&nbsp; -page&nbsp; -comment&nbsp;
    -size&nbsp;
    </CODE></BLOCKQUOTE></P>

    Remember, they are ONLY applied when an image is created or read in and
    are otherwise completely ignored. </P>

    The special operator, "<CODE><A HREF="../option_link.cgi?set"
    >-set</A></CODE>" has been provided to change the meta-data of images
    after they have been read into memory, or processed in some way. See <A
    HREF="#meta-data" >Meta-Data</A> below for more details. </P>

    <A NAME="option_out"></A>
    <B>Output Settings</B> which are only used during the writing or saving of
    images back to disk. </P>

    While they can be given anywhere on the command line, they are only
    applied when the image is written, either as the default last image
    filename argument operation, or via a "<CODE><A
    HREF="../option_link.cgi?write" >-write</A></CODE>", or "<CODE><A
    HREF="../option_link.cgi?identify" >-identify</A></CODE>" operation.

    <BLOCKQUOTE><CODE>
    -quality&nbsp; -loop&nbsp; -compression&nbsp; -format&nbsp;
    -path&nbsp; -transparent-color&nbsp;
    </CODE></BLOCKQUOTE></P>

    If not set, or turned off (using their plus '<CODE>+</CODE>' form), an
    appropriate default will be used.  Generally this default is a saved value
    from the last image read in. </P>

    A few 'operation settings' such as the current "<CODE><A
    HREF="../option_link.cgi?background" >-background</A></CODE>" color, is
    also assigned to the image, if the file format requires. </P>

    <A NAME="option_ctrl"></A>
    <B>Control & Debugging Settings</B> which control how IM, in general,
    performs its tasks.  These includes...

    <BLOCKQUOTE><CODE>
    -verbose&nbsp; -debug&nbsp; -warnings&nbsp; -quiet&nbsp;
    -monitor&nbsp; -regard-warnings
    </CODE></BLOCKQUOTE></P>

    See <A HREF="#controls" >IM Operation Controls</A> below, for more
    information on these special settings. </P>

    <BR>
<TR><TD>&nbsp;
<TR><TD COLSPAN=2><A NAME="option_operators"></A><B>Image Operators</B>
<TR><TD WIDTH=50><TD ALIGN=justify>
    Are command line arguments that will modify the image(s) in some way.
    They are performed <B>immediately</B> when seen, and may use other
    'setting options' that have been given previously on the command line.
    </P>

    These operators can be grouped into a few sub-categories... </P>

    <A NAME="option_create"></A>
    <B>Image Creation Operators</B> which will read images from a file or
    pipeline, or generate new images.  These include...

    <BLOCKQUOTE><CODE>
       image.png&nbsp; xc:&nbsp; canvas:&nbsp; logo:&nbsp; rose:&nbsp;
       gradient:&nbsp; radial-gradient:&nbsp; plasma:&nbsp;
       tile:&nbsp; pattern:&nbsp; label:&nbsp; caption:&nbsp; text:&nbsp;
    </CODE></BLOCKQUOTE></P>

    As 'operators' they are also performed immediately when seen on the
    command line. They only add new images to those already in memory, but do
    not touch those previously read.  </P>

    Of course being operators, any previously defined 'settings' will be
    applied to them.  Especially <A HREF="#option_in" >Input Settings</A>,
    used to control the input from the file or file stream.  For example
    "<CODE><A HREF="../option_link.cgi?size" >-size</A></CODE>", which hints
    at the size of the image you want to create, or setting that define or
    override image meta-data such as "<CODE><A HREF="../option_link.cgi?delay"
    >-delay</A></CODE>", and "<CODE><A HREF="../option_link.cgi?page"
    >-page</A></CODE>". </P>


    <A NAME="option_simple"></A>
    <B>Simple Image Processing Operators</B> will modify all images that have
    already been read into memory. Each image is modified separately
    to every other image.  They include operations such as...

    <BLOCKQUOTE><CODE>
    -crop&nbsp;  -repage&nbsp;  -border&nbsp; -frame&nbsp;
    -trim&nbsp; -chop&nbsp; -draw&nbsp;  -annotate&nbsp;
    -resize&nbsp; -scale&nbsp; -sample&nbsp; -thumbnail&nbsp;
    -magnify&nbsp; -adaptive-resize&nbsp;  -liquid-resize&nbsp;
    -distort&nbsp; -morpohology&nbsp; -sparse-color&nbsp;
    -rotate&nbsp; -swirl&nbsp; -implode&nbsp;  -wave&nbsp;
    -flip&nbsp;  -flop&nbsp;  -transpose&nbsp;  -transverse&nbsp;
    -blur&nbsp; -gaussian-blur&nbsp; -convolve&nbsp; -shadow&nbsp;
    --radial-blur&nbsp; -motion-blur&nbsp; -sharpen&nbsp; -unsharp&nbsp;
    -adaptive-sharpen&nbsp;  -adaptive-blur&nbsp;
    -noise&nbsp;  -despeckle&nbsp; -median&nbsp;
    -negate&nbsp;  -level&nbsp;  -level-color&nbsp;  -gamma&nbsp;
    -auto-level&nbsp; -auto-gamma&nbsp; -sigmoidial-contrast&nbsp;
    -normalize&nbsp; -linear-stretch&nbsp;  -contrast-stretch&nbsp;
    -colorize&nbsp;  -tint&nbsp;  -modulate&nbsp;  -contrast&nbsp;
    -equalize&nbsp;  -sepia-tone&nbsp;   -solarize&nbsp;
    -recolor&nbsp; -opaque&nbsp;  -transparent&nbsp;
    -colors&nbsp;  -map&nbsp;  -ordered-dither&nbsp;  -random-dither&nbsp;
    -raise&nbsp; -paint&nbsp; -sketch&nbsp; -charcoal&nbsp; -edge&nbsp;
    -vignette&nbsp; -emboss&nbsp; -shade&nbsp; -poloroid&nbsp;
    -encipher&nbsp;  -decipher&nbsp;  -stegano&nbsp;
    -evaluate&nbsp; -function&nbsp;
    -alpha&nbsp; -colorspace&nbsp; -separate&nbsp;
    <BR>
    <BR>And probably many other operators I missed! (or have been added)
    </CODE></BLOCKQUOTE></P>

    Because all image operators are performed immediately when seen on the
    command line, they must be given <I>after</I> the images for which they
    are to operate, have been read into memory. </P>

    If more than one image is present, <I>all</I> images are operated on, one
    at a time in sequence.  As such you will have to be careful about what
    image(s) you have in the current image list. </P>

    Note that it is possible that some of these operators can generate multiple
    images.  For example "<CODE><A HREF="../option_link.cgi?crop"
    >-crop</A></CODE>" could generate multiple image 'tiles', or "<CODE><A
    HREF="../option_link.cgi?separate" >-separate</A></CODE>" which splits
    images into separate channel images.  As such you may end up with more
    images in memory.  But all of them only take one image at a time as input.
    </P>

    Note that many API's only apply the equivalent operation to just the first
    image in the image list given. That is they may not loop over each image.
    The "<code>magick</code>" and other CLI (command line interface)
    commands, however apply the operator to each image in the current image
    list in turn. </P>


    <A NAME="option_list"></A>
    <B>Multi-Image List Operators</B> are special in that they modify the
    whole current list of images as a single entity.  They could replace the
    whole list with a single combined image, or modify each image depending on
    the other images found before or after it.  They are used for alpha
    composition, animation handling, color channel handling, etc...

    <BLOCKQUOTE><CODE>
    -append&nbsp; -flatten&nbsp;  -mosaic&nbsp; -layers&nbsp;
    -composite&nbsp;  -combine&nbsp;  -fx&nbsp;  -coalesce&nbsp;
    -clut&nbsp;  -evaluate-sequence mean&nbsp;  -evaluate-sequence&nbsp;
    </CODE></BLOCKQUOTE></P>

    Remember the whole list is treated as a single entity, and some images may
    be removed, or replaced.  Most of the above operators merges all the given
    multiple images into a final single image. </P>

    The <A HREF="../anim_mods/#composite" >Layers Composite</A> method is
    currently the only operator that will spilt the current image list into
    two completely separate image lists, before merging them together to form
    completely new list of images. It makes the split by looking for the
    special '<CODE>null:</CODE>' image somewhere in the current image list.
    </P>

    None of these operators can be used in a "<CODE><A HREF="#mogrify"
    >mogrify</A></CODE>" command, as that command processes a list of input
    images (given at the end) as an individual images.  </P>


    <A NAME="option_stack"></A>
    <B>Image Stack Operators</B> affects the ordering of the list of images
    currently in memory. Specifically they provide special 'on the side'
    processing of images.  They are in many way similar to the previous <A
    HREF="#option_list" >Image List Operator</A>, but they don't actual modify
    the images themselves, only how they are arranged in memory.

    <BLOCKQUOTE><CODE>
    (&nbsp; )&nbsp; -delete&nbsp; -insert&nbsp; -swap&nbsp;
    -reverse&nbsp; -duplicate&nbsp; -clone&nbsp;
    </CODE></BLOCKQUOTE></P>

    Note that parenthesis '<CODE>(</CODE>' and '<CODE>)</CODE>' may require
    backslashing or quoting, to prevent any special meaning given to it by
    the Command Line shell Interface (CLI). </P>

    None of these operators can be used in a "<CODE><A HREF="#mogrify"
    >mogrify</A></CODE>" command, as that command processes a list of input
    images (given at the end) as an individual images.  </P>


    <A NAME="option_misc"></A>
    <B>Miscellaneous Special Operators</B> are operators that do things in
    either an unusual or non-standard ways (compared to the above).

    <BLOCKQUOTE><CODE>
       -geometry&nbsp; -version&nbsp; -list&nbsp; -bench&nbsp;
       -concurrent&nbsp; -preview&nbsp;

    </CODE></BLOCKQUOTE></P>

    The "<CODE><A HREF="../option_link.cgi?geometry" >-geometry</A></CODE>"
    operator is special as it is the only operator that only affects one image
    (the last) in the image list, rather than affecting all of the images
    in some way.  It is only provided for backward compatibility and special
    alpha composition requirements.  See <A HREF="../resize/#geometry"
    >Geometry, resize just the last image</A> for more details.  </P>

    The other two "<CODE><A HREF="../option_link.cgi?version"
    >-version</A></CODE>" and "<CODE><A HREF="../option_link.cgi?list"
    >-list</A></CODE>" are information generating operators, and causes IM to
    explicitly quit, after returning the requested information.  See <A
    HREF="#controls" >IM Special Controls</A> below, for more information
    on these options. </P>

    Some options could even cause the whole command to be run multiple times.
    Basically they are specially handled in some strange and unusual way. </P>

    Generally these as not used except in special situations or to recover
    specific global information. </P>

</TABLE></P>

I hope the separation of options into settings and operators is clear as it
is vital to the way IM now works. </P>

Remember under version 6 of ImageMagick... </P>
<DIV ALIGN=center><B>
        Settings are <I>saved</I> in some way for later use, <br/>
       while Operators are applied <I>immediately</I> to the images.
</B></DIV></P>

This is what makes version 6 different from every previous version of IM. All
options are defined to be a 'setting' or an 'operator' and the order will
determine exactly when, and to what images, the option will be applied to.
</P>

The <A HREF="../reference.html" >IM Examples Options Reference</A> can be used
to identify what is an 'setting' and what is an 'operator'. </P>


<A NAME="example"></A>
<H3>Working Example of an IM Command</H3>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR VALIGN=bottom><TD width="100%" ALIGN=justify>
Let's take a look at an example, and how it will be processed by IM version 6.

<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick eye.gif news.gif -append    storm.gif tree.gif \
           -background skyblue +append    result.gif
</samp></pre></TD></TR></TABLE></TD><TD>
 <A HREF="result.gif"
    ><IMG SRC="result.gif"
          ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>


Let's break this down and look at what IM v6 does...
<TABLE WIDTH=90% ALIGN=center CELLPADDING=3>
<TR valign="top">
    <TD><B>Argument</B>
    <TD ROWSPAN=30>&nbsp;&nbsp;&nbsp;
    <TD><B>Action Performed
    <TD ALIGN=center><B>Images</B>
<TR valign="top">
    <TD COLSPAN=7><HR></TD>
<TR valign="top">
    <TD><B><FONT SIZE=-1><code>magick</code></FONT></B>
    <TD>Initialize and Create an empty 'image list'
    <TD ALIGN=center VALIGN=bottom><FONT SIZE=-1>empty&nbsp;seq</FONT>
<TR valign="top">
    <TD><B><FONT SIZE=-1><CODE>eye.gif</CODE></FONT></B>
    <TD>Read in image and add to end of current image list
    <TD ALIGN=center VALIGN=bottom><FONT SIZE=-1>1 image</FONT>
<TR valign="top">
    <TD><B><FONT SIZE=-1><CODE>news.gif</CODE></FONT></B>
    <TD>Add a second image into list (now with two images)
    <TD ALIGN=center VALIGN=bottom><FONT SIZE=-1>2 images</FONT>
<TR valign="top">
    <TD><B><FONT SIZE=-1><CODE>-append</CODE></FONT></B>
    <TD>Take all images in current list, and append vertically.
    <BR>All images are replaced by a single image.
    <TD ALIGN=center VALIGN=bottom><FONT SIZE=-1>1&nbsp;(merged)</FONT>
<TR valign="top">
    <TD><B><FONT SIZE=-1><CODE>storm.gif</CODE></FONT></B>
    <TD>Add another image to the image list
    <TD ALIGN=center VALIGN=bottom><FONT SIZE=-1>2</FONT>
<TR valign="top">
    <TD><B><FONT SIZE=-1><CODE>tree.gif</CODE></FONT></B>
    <TD>And another
    <TD ALIGN=center VALIGN=bottom><FONT SIZE=-1>3</FONT>
<TR valign="top">
    <TD><B><FONT SIZE=-1><CODE>-background&nbsp;skyblue</CODE></FONT></B>
    <TD>Set a 'background color' to be used later.
    <BR>No changes are made to any images.
    <TD ALIGN=center VALIGN=bottom><FONT SIZE=-1>3</FONT>
<TR valign="top">
    <TD><B><FONT SIZE=-1><CODE>+append</CODE></FONT></B>
    <TD>Join all 3 images in the list horizontally
    <BR>Current background color is used to fill the empty space
    <TD ALIGN=center VALIGN=bottom><FONT SIZE=-1>1&nbsp;(merged)</FONT>
<TR valign="top">
    <TD><B><FONT SIZE=-1><CODE>result.gif</CODE></FONT></B>
    <TD ALIGN=justify>As this is last argument, an implicit
       <B><CODE>-write</CODE></B> operation is performed with this argument.
       The single image in the current list is written using the given
       filename which also sets image file format to use.
    <TD ALIGN=center VALIGN=bottom><FONT SIZE=-1>written</FONT>
</TD></TR></TABLE></P>

As you can see the processing of the command line in ImageMagick version 6 is
very straight forward, and logical, making the result predictable. And that is
the point...  </P>

<A NAME="legacy"></A>
<H3>Legacy Command Line Style</H3>

Due to the fact that a lot of very old IM scripts out there use a command with
a single image operator of the form... </P>

<DL><DD><PRE><B>
command  -operator  input_image   output_image
</B></PRE></DL></P>

That is you specified an image operator before you actually read the image
to which the operator will be applied. </P>

To handle this legacy situation, IM will save up all the image operators it
sees, and apply them to the first image when it is finally seen on the command
line.  That is the above will work as if you wrote the operation in the IMv6
way... </P>

<DL><DD><PRE><B>
command  input_image   -operator  output_image
</B></PRE></DL></P>

For example, this IMv5 legacy (UNIX option handling) command....

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -flip  storm.gif   cmd_flip_legacy.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="cmd_flip_legacy.gif"
     ><IMG SRC="cmd_flip_legacy.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Will produce the same result as this IM version 6 command...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick storm.gif -flip  cmd_flip_postfix.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="cmd_flip_postfix.gif"
     ><IMG SRC="cmd_flip_postfix.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

The legacy command line style works, but has the same problems that plagued IM
version 5 (see <A HREF="#why" >Why did the command line style change</A>
above).  All settings are applied before the first read, and all the operators
are just saved away to be executed when the first image is read (and only on
the first image).  There is also no guarantee of the order of multiple
operators will be the same as the order you give, though it is likely they
will be applied in that order. </P>

Also as operators are being save up until the first image is actually read,
you may find repeating a command multiple times before reading the image may
result in some of the earlier commands 'disappearing'.  This is not a bug, but
a miss-use of the legacy abilities of IM. </P>

This style of command line is for legacy support only, and as such is
depreciated, so should be avoided if at all possible.  Any scripts containing
this old style, should also be updated to do image reads before the operators
you want to apply to them. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/warning.gif"  WIDTH=28 HEIGHT=28
    ><IMG SRC="../img_www/space.gif"   WIDTH=12 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Legacy support will continue into IM version 7, which includes a command
  that allows for single-pass processing of command lines. This allows it to
  actually read image processing options from script files and even
  a pipeline.  However a single-pass processing technique will not allow for
  the saving of operators BEFORE reading an image to apply them to.  In fact
  the "<CODE>magick</CODE>" command will produce 'no image' type errors, if
  you try to use an operator without an image in memory.
</I></FONT></TD></TR></TABLE></P>


<A NAME="cmd_vs_api"></A>
<H3>Command Line vs API</H3>

There is a couple of major differences between a command line IM, and using
the Magick API's, such as PerlMagick, RMagick, PHP IMagick, and MagickWand. </P>

<DL>
<DT><B>Only one Active Image List</B>
<DD>The command line only ever has one Image List which can be worked on at
    any one moment. </P>

    You can 'push' or save an image list temporary (see <A
    HREF="#parenthesis" >Parenthesis</A> and <A HREF="../files/#mpr" >MPR:
    Named Memory Registers</A>). You can even 'clone' (make an efficent copy)
    of images from the last 'pushed' list. But you can't really work on two
    such lists at the same time.  </P>

    Other language API's on the other hand allow you to have as many separate
    image lists or 'wands' as you like. In fact you typically save each image
    as a separate wand (image list and settings) for better processing and
    only merge the image into a list as needed or as part of the final step.
    You can also work on them in any order, and store them into databases or
    other data structures, for sorting or later comparison. </P>

    On the command line however one single image list means you can not do
    operations in just any order, but generally try to do things in a more
    logical sequence, completely finishing each image processing step as you
    go.  Basically it means is much harder to 'go back' or to change something
    later, using results from one set of operations to select or modify what
    set of processing operations should be performed next. </P>

    It is especially more difficult to merge or interleave (shuffle) two
    completely separate lists of images into a logical whole.  However some
    techniques have been worked out, to allow you to do this from the command
    line.  For example see <A HREF="../anim_mods/#composite" >Multi-Layer
    Alpha Composition of Image Lists</A>.  </P>

<DT><B>Direct Access to Pixel Data</B>
<DD>Again you can do some math processing and merging of pixel data from the
    command line, but you can't easily look up attributes, or read and modify
    a specific pixel or area using the command line interface. </P>

    You can merge and mathematically modify pixel data of images using the
    special <A HREF="../transform/#fx" >FX Image Operator</A>, but it is
    generally limited to transforming whole images, and is very very slow.  </P>

    To make it easier many common operations developed by users using the FX
    operator, have now been built into IM, creating things like <A
    HREF="../color_mods/#clut" >Color Lookup Tables</A>, <A
    HREF="../transform/#evaluate" >Evaluate Math Functions</A>, and <A
    HREF="../transform/#function" >Multi Argument Functions</A>. As well as
    the <A HREF="../distorts/#distort" >General Image Distortion Operator</A>,
    and some special <A HREF="../compose/#composite" >Image Composition
    Methods</A>. </P>

    API's can manipulate images in a much more direct manner, alowing you to
    DIY an unique operation much more easilly, at the full speed provided by
    the API language. </P>

<DT><B>Conditional Processing</B>
<DD>The IM command line interface cannot easilly modify images based on
    some image derived attribute.  For example it is very hard to process
    images differently depending on if the image uses a light background, or a
    dark background. </P>

    Yes you can do some limited and specific conditional actions using the <A
    HREF="../transform/#fx" >FX Image Operator</A>, or ask IM to adjust
    (rotate) an image's <A HREF="../photos/#orient" >Orientation</A>
    based on certain conditions, or only shrink and never enlarge when <A
    HREF="../resize/#resize" >Resizing Images</A>. But these are only handling
    special well known and common processing conditions. </P>

    The only truly practical way do conditional processing is to use separate
    commands and temporary files. For an example of this see the well
    commented <A HREF="../scripts/jigsaw" >Jigsaw Script</A>. </P>

    API's on the other hand can do this type of conditional processing, while
    holding all the images involved in memory, ready to continue processing
    based on the specific conditions, as and when you need it. </P>

<DT><B>Looped Processing</B>
<DD>You also cannot just simply loop over images in a controlled manner, or
    easily modify the process based on which image in the sequnece is being
    handled.  that is you can not simply do something different to each image
    based on the image 'scene' number, or the results of previous images.  For
    example draw text at different sizes, or gradually blur an image, or
    generate an animation list in the one single command. </P>

    Yes you can modify specific images in an image list. For example see <A
    HREF="../anim_mods/#frame_mod" >Frame by Frame Modification of an
    Animation</A>.  But you must know how many images are in the image list,
    and 'un-roll' the loop to process each image in the list separately. </P>

    The only truly practical way to loop over images from the command line is
    to write out the individual images as separate image files (see <A
    HREF="files/#write_list" >Writing a Multiple Images</A>) and process
    them one at a time in an external scripted loop. For example see the
    shell script that is designed to <A HREF="../scripts/divide_vert" >Divide
    an Image Vertically</A>. </P>

    Alternatively, you can generate the images using a shell script loop, and
    pipe the result into a final command to merge them into the final image or
    image sequnece.  For example of this see <A
    HREF="../layers/#layer_examples" >Layered Images Examples</A>, or the
    various <A HREF="../warping/#animations" >Warped Image Animations</A>
    shell script generators.  </P>

    API's however have no problem with looping over multiple images, either in
    a single image list, or even multiple image lists, or even with a whole
    array or data structure of image lists. It can also hold all the images in
    memory ready for the final combining step, without pipelining, or using
    temporary files. </P>

</DL>

If your application needs to be able to do any of these things (though few
applications actually need to go this far) then an API may be a better choice.
</P>

The "<CODE><A HREF="#conjure" >conjure</A></CODE>" program (see below) was
originally designed to allow better scripted use of ImageMagick, allowing the
use of multiple image lists. The improvements made to IM v6
"<code>magick</code>" has seen this experimental API fall into disuse, though
it is still available and still being developed. </P>

<BR>

<A NAME="arguments"></A>
<H3>Argument Handling</H3>

Beyond the filenames and options on the command line there are only a few
basic styles of option arguments that are used.

<UL>
<LI>Constant Names&nbsp; (for specific settings and method types)
<LI>List of Contant Names&nbsp; (for example two colors, or Channels)
<LI>Geometry Argument&nbsp; (a special formated list of numbers with flags)
<LI>Floating Point Lists&nbsp;
    (sometimes with <A HREF="#arg_percent" >Percent Escapes</A>)
<LI>Free Form Text Strings&nbsp;
    (with <A HREF="#arg_percent" >Percent Escapes</A>)
</UL>

<A NAME="arg_constant"></A>
<H4>Constant Names</H4>

Constant Names are specific string constants that are used to look up
an internal library of allowed settings that may be used by an option. </P>

For example, the "<CODE><A HREF="../option_link.cgi?gravity"
>-gravity</A></CODE>" setting can take any of nine different settings.  Once
set that setting is then be used by all the image processing operators that
follow the setting on the command line.  For example: settings such as
'<CODE>North</CODE>', '<CODE>East</CODE>', or '<CODE>NorthEast</CODE>'. </P>

You can get a list of all valid settings by using the <A HREF="#list" >List
Operational Option</A> (see below).  For example using the command...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -list gravity
</samp></pre></TD></TR></TABLE>
</DIV></P>

Only those specific settings are allowed and if you attempt to use some other
setting you will get an error.  For example...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE ERR=gravity_error.txt >
  magick xc: -gravity Invalid   null:
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="gravity_error.txt"
    ><IMG SRC="gravity_error.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

The setting can be specified in a number of different ways, all of which are
perfectly valid. IM is very forgiving about this.  For example a setting can
be specified in uppercase, lowercase, or any combination of the two.  The
individual words (specified by uppercase letters in the "<CODE><A
HREF="../option_link.cgi?list" >-list</A></CODE>" output) can have extra
spaces, hyphens, or underscores included, and which are then simply ignored
(but only between words). </P>

Consequently all the follow arguments are valid to set "North East"
"<CODE><A HREF="../option_link.cgi?gravity" >-gravity</A></CODE>"...

<DL><DD>
'<CODE>NorthEast</CODE>',&nbsp;
'<CODE>northeast</CODE>',&nbsp;
'<CODE>NORTHEAST</CODE>',&nbsp;
'<CODE>NorTheAst</CODE>',&nbsp;
'<CODE>north east</CODE>',&nbsp;
'<CODE>north-EAST</CODE>',&nbsp;
'<CODE>NORTH_EAST</CODE>',&nbsp;
'<CODE>&nbsp;North&nbsp;East&nbsp;</CODE>',&nbsp;
'<CODE>___North___East___</CODE>'.
</DD></DL>

But an argument of '<CODE>Nor The Ast</CODE>' is not valid, even though the
letters are all correct, as it uses spaces within the declared words of the
setting. </P>

These constant names are not just for settings, but also to declare the
operational method to use in some of the more complex image processing
operators, such as "<CODE><A HREF="../option_link.cgi?layers"
>-layers</A></CODE>", "<CODE><A HREF="../option_link.cgi?distort"
>-distort</A></CODE>", and "<CODE><A HREF="../option_link.cgi?morphology"
>-morphology</A></CODE>". </P>

Some of the constant names are read from external configuration files.  For
example, color names such as for "<CODE><A HREF="../option_link.cgi?fill"
>-fill</A></CODE>", "<CODE><A HREF="../option_link.cgi?stroke"
>-stroke</A></CODE>", "<CODE><A HREF="../option_link.cgi?background"
>-background</A></CODE>" and "<CODE><A HREF="../option_link.cgi?mattecolor"
>-mattecolor</A></CODE>".  Or the special 'threshold' maps used for "<CODE><A
HREF="../option_link.cgi?ordered-dither" >-ordered-dither</A></CODE>".  Again
"<CODE><A HREF="../option_link.cgi?list" >-list</A></CODE>" can be used to
look up what names your currently installed version of IM knows about. </P>

<A NAME="arg_const_list"></A>
<H4>Constant Name List</H4>

This is a little used argument and is most commonly used in settings that need
one or two colors, such as <A HREF="../color_mods/#level-colors" >Level
Adjustment by Color</A>.  The  "<CODE><A HREF="../option_link.cgi?level-color"
>-level-colors</A></CODE>" option can take any of the following argument
styles. </P>

<BLOCKQUOTE><CODE>
     color&nbsp;&nbsp;   color1,color2&nbsp;&nbsp;   color1-color2
</CODE></BLOCKQUOTE>

It is also used for Image Selection, for operations that make use of multiple
image indexs, for example <A HREF="#duplicate" >Duplicate</A> and <A
HREF="#clone" >Clone</A>. The indexes start with zero for the first image,
while negative indexs can be used to denote image indexs starting from the end
of the image list. For example '<CODE>-2-1</CODE>' means take the second last
image (index '<CODE>-2</CODE>'), to the second image (index '<CODE>1</CODE>').
And yes this actually means take the images in the reverse order specified!</P>

Another option that makes heavy use of this is <A
HREF="../color_basics/#channel" >Channel Selection</A> where you can specify
a list of specifically named channels. For example:
'<CODE>Red,Green,Blue,Black,Alpha</CODE>'.  However the <A
HREF="../color_basics/#channel" >Channel Setting</A> can also use a shorthand
using a string of single letters (Eg: '<CODE>RGBA</CODE>') </P>


<A NAME="arg_geometry"></A>
<H4>Geometry Arguments</H4>

This is the most common form of option argument, and is typically used to
specify sizes, rectangles, and offsets for various operations. But it is also
used by any option that needs any list of 1 to 5 numbers, whether they are
integers, or floating point. </P>

For example, options such as "<CODE><A HREF="../option_link.cgi?crop"
>-crop</A></CODE>", and "<CODE><A HREF="../option_link.cgi?resize"
>-resize</A></CODE>" will use the full syntax of a geometry argument, while
others like "<CODE><A HREF="../option_link.cgi?border" >-border</A></CODE>",
"<CODE><A HREF="../option_link.cgi?level" >-level</A></CODE>", and "<CODE><A
HREF="../option_link.cgi?gamma" >-gamma</A></CODE>", may only use a small part
of the full geometry syntax. </P>

This type of argument is so common that a special (and complex) parser has
been written to magick such string arguments to numbers and flags, for use by
any operator that needs a geometry argument.  </P>

A geometry argument basically allows an user to specify a single string
argument containing up to 5 floating point values (though most operators only
use integers). All the following string forms are understood the geometry
argument parser... </P>

<BLOCKQUOTE><CODE>
  WxH+X+Y&nbsp;&nbsp;   WxH&nbsp;&nbsp;  +X+Y&nbsp;&nbsp;
  A&nbsp;&nbsp;   A/B/C&nbsp;&nbsp;   A,B,C,D,E
</CODE></BLOCKQUOTE>

Users could specify the small list of numbers in ANY of these forms, but
typically which form is used depends on the operation the argument is being
used for. </P>

The first few is typically used for the specification of a rectangle of
specific size and location, or just an offset for some purpose. Offsets are
always decoded to different numbers, those on either side of an 'x' in the
string.  That is a "<CODE>+X+Y</CODE>" is always decoded as a 3rd and 4th
numbers while it flags that the 1st and 2rd are undefined (or zero). </P>

The last few forms will allow up to a maximum of 5 posible input values, and
are typically used for specifying a value for each of the standard RGBKA
image channels.  </P>

On top of these numbers, the parser also reports if any special 'flag'
characters are present (any of '<CODE>%</CODE>', '<CODE>^</CODE>',
'<CODE>!</CODE>', '<CODE>&lt;</CODE>', '<CODE>&gt;</CODE>' ). </P>

The Parser however only reports if the characters is present. It does not
report where they were found in the argument.  IM for example does not
remember that '<CODE>%</CODE> was attached to a specific number.  It also does
not report if it appears multiple times either. </P>

This means that a geometry argument of '<CODE>%50</CODE>' has exactly the same
meaning as '<CODE>50%</CODE>' though the latter is preferred for readability.
Also '<CODE>50%x30</CODE>' will probably actually mean '<CODE>50%x30%</CODE>'
and NOT 50% of the images width, and 30 pixels high as you might think.  </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/expert.gif"   WIDTH=23 HEIGHT=26
    ><IMG SRC="../img_www/space.gif"   WIDTH=17 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  As a geometry arguments can contain special '<CODE>%</CODE>' flags, you
  currently can not use <A HREF="#arg_percent" >Percent Escapes</A> to set its
  values based on image attributes. </P>

  There is a <A HREF="../bugs/future/#settings" >Future Proposal</A> about
  exactly when a percent escape will be expanded that could fix this problem
  with geometry arguments. And hopefull will be part of IMv7. </P>

</I></FONT></TD></TR></TABLE></P>

<A NAME="arg_list"></A>
<H4>Floating Point Lists</H4>

If more than 5 floating point numbers are needed, perhaps even an unknown
number of values, then a <B>Floating Point List</B> argument, is used, though
at the moment these are generally parsed by individual options, as they can
vary slightly from option to option. </P>

Generally they consist of a string (typically quoted) of comma or space
separated floating point numbers.  The <A HREF="../distorts/#distort" >Distort
Operator</A> is probably the most well known operator to use a list of
floating point numbers.  Others include <A HREF="../morphology/#user" >User
Defined Morphology and Convolution Kernels</A>, though it also has extra
syntax specific to defining an array of numbers (kernels).  </P>

One variant of floating point numbers is used by "<CODE><A
HREF="../option_link.cgi?sparse-color" >-sparse-color</A></CODE>", allowing
you to substitute colors for some floating point values. Internally these are
still converted to floating point values when the resulting array is passed
into the core library function. </P>

<A NAME="arg_string"></A>
<H4>Freeform Strings</H4>

Other options just take a string as an argument.  Either for generating
labels, annotating text, or saving as image meta-data. </P>

These will typically include <A HREF="#arg_percent" >Percent Escapes</A> in
the string which are replaced (substituted) at some point before the string is
used.  It may be an immediate substitution, or the substitution may be
performed later, just before the arguemnt is actually used.  (See <A
HREF="#arg_delayed" >Delayed Percent Escapes</A> below. </P>


<A NAME="arg_percent"></A>
<H4>Arguments with Percent Escapes</H4>

Because of their nature, either of last two types of arguments  are often
pre-processed so as to expand <A
HREF="http://imagemagick.org/script/escape.php" >Image Property Percent
Escape</A> within the string. </P>

That means that specific sequences of characters will be expanded (string
replaced or substituted) into some other string, or value that is looked up or
calculated from the image(s) being processed. </P>

This typically is done just before the argument is actually applied by the
operator to a specific image, so that settings specific to that image can be
used.</P>

If percent escapes are allowed in an argument, you can instead prefix the
argument with a '<CODE>@</CODE>' so that the whole argument is instead read
from the given external file (or standard input).  For example
'<CODE>@filename</CODE>' will be replaced with the contents of the file
'<CODE>filename</CODE>'.  If this happens, <I>no percent or other special
escapes is applied</I>.  That is string read from the file will be taken as
literal, and used without modification.  </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/expert.gif"   WIDTH=23 HEIGHT=26
    ><IMG SRC="../img_www/space.gif"   WIDTH=17 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  WARNING: that file could be anything, including system and password files
  that may be readable by the program. As such web users should pre-check
  input strings for this special case, or better still feed that string to IM
  using the '<CODE>@filename</CODE>' clause, as a security measure.
</I></FONT></TD></TR></TABLE></P>

If the string is not read from a file or input stream, then any
'<CODE>\n</CODE>' strings are replaced with a 'newline' character, and any
'<CODE>%</CODE>' prefixed label is replaced with the appropriate value.  See
<A HREF="http://imagemagick.org/script/escape.php" >Image Property Percent
Escapes</A> for the complete list of replacements. </P>


The use of Percent Escapes in arguments, means that for growing list of
operators that allow the use of such escapes, such as "<CODE><A
HREF="../option_link.cgi?set" >-set</A></CODE>","<CODE><A
HREF="../option_link.cgi?sparse-color" >-sparse-color</A></CODE>", "<CODE><A
HREF="../option_link.cgi?distort" >-distort</A></CODE>", or "<CODE><A
HREF="../option_link.cgi?morphology" >-morphology</A></CODE>", you can
generate arguments based in various image attributes and meta-data.
ImageMagick version 7 allows the use of Percent Escapes in just about EVERY
argument, (a key feature of IMv7!). </P>

Not only that but you can even calculate different arguments depending in the
content or index of the image!  You can even pre-calculate some complex
settings using per-image or predefined global settings. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/warning.gif"  WIDTH=28 HEIGHT=28
    ><IMG SRC="../img_www/space.gif"   WIDTH=12 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Before IM v6.6.9-0 <A HREF="http://imagemagick.org/script/escape.php"
  >Percent Escapes</A> and more specifically <A
  HREF="../transform/#fx_escapes">FX Percent Escapes</A> involving image
  indexes, such as '<CODE>%p</CODE>', '<CODE>%n</CODE>',
  '<CODE>%[fx:t]</CODE>' and '<CODE>%[fx:n]</CODE>' were broken.  Typically
  they would only return unhelpful values of either '<CODE>0</CODE>' or
  '<CODE>1</CODE>', and not the actual index and number of images in the
  current image list.
</I></FONT></TD></TR></TABLE></P>


<A NAME="arg_delayed"></A>
<H4>Delayed Percent Escapes</H4>

Note that for some setting options <A
HREF="http://imagemagick.org/script/escape.php" >Percent Escapes</A> are not
be expanded immediately they are seen, but simply stored AS given.  It is only
later when the text is actually used, that any <A
HREF="http://imagemagick.org/script/escape.php" >Percent Escapes</A> found in
the string should be expanded, when the image they will be used with are
finally known.  </P>

That is these arguments must delay the substitution of <A
HREF="http://imagemagick.org/script/escape.php" >Percent Escapes</A> until the
argument is actually used.  </P>

These options include the <A HREF="#option_in" >Input Settings</A> such as:
"<CODE><A HREF="../option_link.cgi?label" >-label</A></CODE>", "<CODE><A
HREF="../option_link.cgi?comment" >-comment</A></CODE>", as well as
the "<CODE><A HREF="../option_link.cgi?format" >-format</A></CODE>" setting,
and global "<CODE><A HREF="../option_link.cgi?define" >-define</A></CODE>"
values. </P>

This means you can specify a "<CODE><A HREF="../option_link.cgi?label"
>-label</A></CODE>" containing image specific <A
HREF="http://imagemagick.org/script/escape.php" >Percent Escapes</A> long
before the image it is to be applied to is actually read in.  Only when the
label is actually attached to the image (just after it is read in) is the <A
HREF="http://imagemagick.org/script/escape.php" >Percent Escapes</A> expanded,
so that it can make use of the attributes of the image to which it is being
applied. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/expert.gif"   WIDTH=23 HEIGHT=26
    ><IMG SRC="../img_www/space.gif"   WIDTH=17 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  The major limitation to the more wide spread use of <A
  HREF="http://imagemagick.org/script/escape.php" >Percent Escapes</A> is that
  it is currently only applied to a limited set of option arguments.  For
  example we currently can not use them with <A HREF="#arg_geomtery" >Geometry
  Arguments</A>, which also use 'percent' characters, but for a different
  purpose. </P>

  This problem is one of the major problems that IMv7 will be fixing.

</I></FONT></TD></TR></TABLE></P>


<HR><!-- ---------------------------------------------------------------- -->

<A NAME="im_commands"></A>
<H2>ImageMagick Commands</H2>

While the bulk of these ImageMagick example pages use the
"<code>magick</code>" command to process images, there are a number of other
ImageMagick commands, which I'll briefly introduce here. </P>

Some of these commands however can not be demonstrated properly on a web page.
However I will try to give you hints and tips involving those commands here,
even if I can't actually show their output directly, here.  </P>

<A NAME="magick"></A>
<H3>Convert -- Convert and Modify Images</H3>

The "<code>magick</code>" command is the main workhorse of ImageMagick, and
as such just about every set of examples in these pages uses this command.  As
such I will not cover the use of this command much here, but look at a little
history instead.  </P>

The commands original purpose when IM was first created was for the conversion
of images in one image format into another.  In fact it is still used for this
purpose, and why it is called "<code>magick</code>". </P>

Because of this the command may not even read an image into memory, but may
use secondary <A HREF="../files/#delegates" >Delegate</A> programs outside IM
proper to do the conversion directly.  This completely external aspect however
has fallen into disuse over time, and lack of need, except as a means of
reading in and writing out complex images file formats. </P>

Over a long period of time some extra image processing features was added to
make minor changes to images as they were transferred between formats, or even
the same format. These were generally simple options, but as of IM version
5 the use of these processing features had become extensive, and a far more
important aspect to the "<code>magick</code>" command than just image
conversion. </P>

As options multiplied, multiple options started to be used, the order of the
options started producing weird and uncontrollable results.  To users IM
became known as unstable and uncontrollable when multiple image processing
options was used, and it started to fall into disfavor.  </P>

IM version 6 saw the switch from a simple 'options' style, to a 'do it as you
see it' style for image processing, and as a result, image processing
abilities become stable, predictable and IM's command line abilities became
many orders of magnitude more useful. </P>

As a result of this, "<code>magick</code>", is no longer so much about
'converting' images from one format to another, but as a command line API for
accessing image processing functions, to create, and modify images in very
complex ways, without needing a degree in image processing, or programming in
a computer language (such as Perl, PHP, or C).  Of course some shell scripting
knowledge is helpful, though not strictly required. </P>

<BR>

<A NAME="identify"></A>
<H3>identify
<FONT SIZE=-1>-- Print the details of images, that IM sees</FONT></H3>

The "identify" command is designed to return information about an image in a
simple and useful way.  By default it outputs a simple compact summary,
detailing the images name, file format, image size, virtual canvas size and
offset, color depth, internal format type, and if known the original size of
the image on disk in human terms. </P>

For example...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE OUT=identify.txt >
  magick identify  tree.gif
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="identify.txt"
    ><IMG SRC="identify.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

Note that the '<CODE>8c</CODE>' in the above result is not the number of colors
within this image (which is actually 6), but the 'pseudo-color' palette
size (see later example for actual number of colors). Also note that the image
'virtual canvas' is the same size as the actual image with a zero offset,
meaning it is currently not being used. </P>

Adding a <A HREF="#verbose" ><CODE>-verbose</CODE></A>, <A HREF="#controls"
>Operational Control</A>, will produce as much information about the image
that IM knows about or can easily calculate.  This includes color statistics,
color counts, profile information, internal image save type of the image, etc.
etc..  However be warned that the output really is... <I>verbose</I>! </P>


Specific information can be obtained and output in specific ways by using the
"<CODE><A HREF="../option_link.cgi?format" >-format</A></CODE>" setting, and
IM special percent ('<CODE>%</CODE>') escapes to output <A
HREF="https://imagemagick.org/script/escape.php" >Image Properties</A>.
However typically you need to specify an EOL (newline under UNIX or MacOSX)
as part of that argument (changed in IM v6.8.5-8).
</P>

For example you can just extract a count of the number of colors within an
image.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE OUT=identify_colors.txt >
  magick identify -format '%k\n' tree.gif
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="identify_colors.txt"
    ><IMG SRC="identify_colors.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/warning.gif"  WIDTH=28 HEIGHT=28
    ><IMG SRC="../img_www/space.gif"   WIDTH=12 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Before IM v6.8.5-8 "<CODE><A HREF="../option_link.cgi?format"
  >-format</A></CODE>" would automatically add an end-of-line character(s)
  to the output, so as to separate multiple image results.  This is no longer
  done, so you may need to add your own appropriate EOL characters to the
  "<CODE><A HREF="../option_link.cgi?format" >-format</A></CODE>" string.
</I></FONT></TD></TR></TABLE></P>


<A NAME="identify_ping"></A>
<H4>Identify, to Ping or not to Ping</H4>

IM "<CODE><A HREF="#identify" >magick identify</A></CODE>" by default only reads
minimal basic information about an image, using a technique know as "<CODE><A
HREF="../option_link.cgi?ping" >-ping</A></CODE>". This means identify only
reads enough of the image file to determine simple image information, such as
size, without trying to read the whole image into memory.
See <A HREF="#ping"
>Ping, Operational Control</A> below.
</P>

This is a big advantage of "<CODE><A HREF="#identify"
>magick identify</A></CODE>" has over "<CODE><A HREF="#magick"
>magick</A></CODE>". </P>

However, most image meta-data will not be available. For example, image labels
from a PNG image file.  For example, here I create an image with a 'label', and
attempt to use a simple format setting to print out that label.

<DIV ALIGN=center>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE IMAGE=rose.png OUT=identify_ping.txt >
  magick rose: -set label "rose with a label" rose.png
  magick identify -format '"%l"\n' rose.png
</samp></pre></TD></TR></TABLE></TD><TD>
 <A HREF="rose.png"
    ><IMG SRC="rose.png"
          ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="identify_ping.txt"
    ><IMG SRC="identify_ping.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

However this only happens for very specific cases.  Any  "<CODE><A
HREF="../option_link.cgi?format" >-format</A></CODE>" that has more complex
escapes will automatically disable the use of a minimal 'ping' read.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE OUT=identify_no_ping.txt >
  magick identify -format '"%[label]"\n' rose.png
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="identify_no_ping.txt"
    ><IMG SRC="identify_no_ping.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

Or you can specifically disable this minimal 'ping' read, and force identify
to read in the image 'in total' so it gets the desired information.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE OUT=identify_ping_off.txt >
  magick identify +ping -format '"%l"\n' rose.png
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="identify_ping_off.txt"
    ><IMG SRC="identify_ping_off.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

Generally you do not need to worry about it too much. Unless you are dealing
with very large images such as photos. </P>


<A NAME="identify_math"></A>
<H4>Identify as a floating point Calculator</H4>

You can do some floating point mathematics using <A
HREF="../transform/#fx_escapes" >FX Escape Expressions</A>...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE OUT=identify_maths.txt >
  magick identify -ping -format 'double_width=%[fx:w*2] PI=%[fx:atan(1)*4]\n' tree.gif
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="identify_maths.txt"
    ><IMG SRC="identify_maths.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

Note that the math does not even need to be related to the image itself,
allowing you to use IM as a simple floating point calculator for use within
your scripts. </P>

As we are only needing basic information we used the <A HREF="#ping" >Ping</A>
control to prevent identify from reading in the whole image. It has no effect
on the outcome in this case, but can speed up the command enormously. </P>

<A NAME="identify_cavats"></A>
<H4>Extra Cavats about Identify</H4>

<DL>
<DT>Specific Format Details
<DD>Normally IM reads in the image into memory (which is essentially into own
    internal data format), using various image library APIs and delegate
    programs, before outputting the results it sees using identify.  That is
    "<CODE>identify</CODE>" analyzes the image/data content it has read in and
    stored.  It does not analyze how the specific file format stores or
    handles the image data. </P>

    This is important as there can be very specific aspects of specific file
    formats that "<CODE>identify</CODE>" will not report on.  For example
    while it lists the contents of a GIF image color table for each image
    present (multiple images are possible), it will not tell you if all the
    images in the file share the same color table or not. </P>

    If you need specific info about specific image file format, it may be
    better to use a tool designed specifically for that format.  For example
    "</CODE><A HREF="/~anthony/software/#giftrans" >giftrans</A></CODE>" for
    the GIF file format, and "jpegtrans" for the JPEG file format. </P>

<DT>Color Histogram Output
<DD>Note that if image has more that 1024 colors, no histogram or color tables
    will be included in the verbose output. To force the generation of this
    information you can use the special '<A HREF="../files/#histogram"
    ><CODE>histogram:</CODE></A>' file format which includes everything as
    a large image comment. </P>

<DT>Exit Status
<DD>The identify program returns a non-zero exit status if a corrupted image
    is encountered and you add a <A HREF="#regard-warnings" >Regard Warnings
    Control</A>. </P>

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  error=`magick identify -regard-warnings image 2>&1 >/dev/null;`
  if [ $? -eq 0 ]; then
    echo "The image is good"
  else
    echo "The image is corrupt or unknown format"
    echo "$error"
  fi
</samp></pre></TD></TR></TABLE>
</DIV></P>

</DL>

<A NAME="identify_alt" ></A>
<H4>Identify Output Alternatives</H4>

As of IM v6.2.4 you can also produce identify output from the "<CODE><A
HREF="#convert" >convert</A></CODE>" command using the special "<CODE><A
HREF="../files/#info" >info:</A></CODE>" output file format.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE SCRIPT OUT=output_info.txt >
  magick ../images/k* \
          -format 'image \"%f\" is of size %G\n'  info:
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="output_info.txt"
    ><IMG SRC="output_info.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

You can use a <A HREF="../file/#write" >Write Operator</A> to write to
"<CODE><A HREF="../files/#info" >info:</A></CODE>" in the middle of a sequence
of operations, say as a debugging tool. You can also have it write that output
to a specific file (or file stream). </P>

A simplier method would be to use an "<CODE><A
HREF="../option_link.cgi?identify" >-identify</A></CODE>" option to write to
the normal 'standard output'. </P>

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE SCRIPT OUT=output_identify.txt >
  magick ../images/k* \
          -format 'Image #%p named \"%f\" is a %m\n' -identify \
          null:
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="output_identify.txt"
    ><IMG SRC="output_identify.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

This can be also combined with another option, "<CODE><A
HREF="../option_link.cgi?print" >-print</A></CODE>" to output other
information.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE SCRIPT OUT=output_print.txt >
  magick null: -print ' (50 + 25)/5  ==&gt;  %[fx: (50+25)/5 ]\n' null:
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="output_print.txt"
    ><IMG SRC="output_print.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

The main difference between "<CODE><A HREF="../option_link.cgi?identify"
>-identify</A></CODE>" and "<CODE><A HREF="../option_link.cgi?print"
>-print</A></CODE>", is that first will be run once for every image in memory,
while the later will only run once. </P>

That means we can generate just about any text file we want about the images
in memory, completely from within a single ImageMagick command. </P>

For example, here I generate a HTML file of same set of images I have used in
the previous example...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE SCRIPT OUT=output_html.txt >
  magick ../images/k* \
     -print "&lt;HTML&gt;&lt;BODY&gt;&lt;CENTER&gt;\n" \
     -print "&lt;H1&gt;  Display of %n Thumbnails  &lt;/H1&gt;\n" \
     -print "\n" \
     -format "&lt;IMG SRC=\"%i\" ALT=\"%f\" WIDTH=%w HEIGHT=%h&gt;\n" -identify \
     -print "\n" \
     -print "&lt;BR&gt;That's all folks\!\n" \
     -print "\n" \
     -print "&lt;/CENTER&gt;&lt;/BODY&gt;&lt;/HTML&gt;\n" \
     null:
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="output_html.txt"
    ><IMG SRC="output_html.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>
<!-- <CODE EXECUTE SCRIPT>
  if [ ! -e output_html.html ]; then
    ln -s output_html.txt output_html.html
  fi
</CODE> -->

You can see the result of the above output as a <A HREF="output_html.html"
>HTML Web Page</A> showing the images. </P>

One final word about these options.  All of them by default will print to the
'standard output' of the "<code>magick</code>" command.  You can not
specifically output to some other 'pipeline' or to a specific file, unless you
previously re-directed 'standard output'. </P>

Writing the output using "<CODE><A HREF="../files/#info" >info:</A></CODE>"
will let you direct the output to a specific file, just like you can to an
image file.  You can also direct the output to a previously prepared file
descriptor, using the special "<CODE><A HREF="../files/#fd" >fd:</A></CODE>"
output file format.  Of course that writes once per image, so some juggling of
images may be needed to arrange for it to output once only. </P>


<A NAME="mogrify"></A>
<H3>Mogrify -- in-place batch processing</H3>

The "<CODE>mogrify</CODE>" command is in many ways like "<code>magick</code>"
except it is designed to <I>modify images in place</I>.   That is it's primary
purpose is to read images (or animations), one file at a time, and modify
them, before save the image back into the <I>exact same filename</I> the image
was read from. Because of this...

<DIV ALIGN=center><B>
      Mogrify is dangerous, as it can easily destroy the original image!
</B></DIV></P>

As such, before you do anything final, test "<CODE>mogrify</CODE>" with
a separate copy of your images.  Do not do use it on an original image that
has no backup. </P>

Now while "<CODE>mogrify</CODE>" normally saves a modified image into the same
filename, it has two special options which allows it to save images into
a different file. </P>

The "<CODE>mogrify</CODE>" specific setting "<CODE><A
HREF="../option_link.cgi?format" >-format</A></CODE>", defines a different
format and suffix to use when saving files. </P>

As such a command like...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  mogrify    -format jpg   *.png
</samp></pre></TD></TR></TABLE>
</DIV></P>

Will allow you to convert, or batch modify images, without destroying the
original image.   In this case converting all PNG files into JPEG files with
that same filename but a different suffix.  However be warned that if there is
an existing file with the same name, it will be <I>over-written</I>.  </P>

So let me re-iterate...
<DIV ALIGN=center><B>    Think and check before you Mogrify        </B></DIV>
or you may find you just overwrote something you wanted to keep.

As of IM v6.2.0 you can also use a new "<CODE><A
HREF="../option_link.cgi?path" >-path</A></CODE>" option to specify a
different directory in which to output the processed images.  This makes it
safer, however it will still overwrite any images of the same name that may
already be in that directory. Also any old images that was left in that
directory will not be removed. </P>

As such you can have IM save the results (say image thumbnails) into
an existing sub-directory, using something like this...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  mogrify   -path thumbnail-directory   -thumbnail 100x100  *
</samp></pre></TD></TR></TABLE>
</DIV></P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/warning.gif"  WIDTH=28 HEIGHT=28
    ><IMG SRC="../img_www/space.gif"   WIDTH=12 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Before IM v6.3.4-3 the "<CODE><A HREF="../option_link.cgi?format"
  >-format</A></CODE>" and "<CODE><A HREF="../option_link.cgi?path"
  >-path</A></CODE>" settings were mutually exclusive. From that version
  you can change formats and output directory location.
</I></FONT></TD></TR></TABLE></P>

Due to the multi-image processing capability the "<CODE>mogrify</CODE>"
command can not use any of the <A HREF="#option_list" >Multi-Image List
Operators</A> or  <A HREF="#option_stack" >Image Stack Operators</A>. </P>

That means you can not use image processing operators like "<CODE><A
HREF="../option_link.cgi?fx" >-fx</A></CODE>", "<CODE><A
HREF="../option_link.cgi?swap" >+swap</A></CODE>", "<CODE><A
HREF="../option_link.cgi?composite" >-composite</A></CODE>", "<CODE><A
HREF="../option_link.cgi?append" >-append</A></CODE>", "<CODE><A
HREF="../option_link.cgi?flatten" >-flatten</A></CODE>", and "<CODE><A
HREF="../option_link.cgi?layers" >-layers</A></CODE>" in
a "<CODE>mogrify</CODE>" command. </P>

As some setting options are needed to be set before the first image is read in
(for example (for example "<CODE><A HREF="../option_link.cgi?size"
>-size</A></CODE>", "<CODE><A HREF="../option_link.cgi?label"
>-label</A></CODE>" and "<CODE><A HREF="../option_link.cgi?density"
>-density</A></CODE>"), these options are processed and set before the first
image is read in.  After this each image is read in and the operators applied
to them in command line order before the image is saved and the next image
read in.  </P>

It is important to keep this in mind as if you change one of these settings
later in the sequence you can make IM forget a previous setting. </P>

For example..

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE>
  mogrify -format gif  -size 200x200  -pointsize 18 \
          -font Candice -gravity north  -annotate 0 "%f" \
          -font Ravie   -gravity Center -annotate 0 "%f" \
          -font Gecko   -gravity south  -annotate 0 "%f" \
          -size 100x64   xc:gold  xc:orange   xc:tomato
</samp></pre></TD></TR></TABLE>
 <A HREF="gold.gif"
    ><IMG SRC="gold.gif"
          ALIGN=middle VSPACE=5 HSPACE=15 BORDER=1 ALT="[IM Output]"></A>
 <A HREF="orange.gif"
    ><IMG SRC="orange.gif"
          ALIGN=middle VSPACE=5 HSPACE=15 BORDER=1 ALT="[IM Output]"></A>
 <A HREF="tomato.gif"
    ><IMG SRC="tomato.gif"
          ALIGN=middle VSPACE=5 HSPACE=15 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

As you can see the size of the above images generated was determined by the
second "<CODE><A HREF="../option_link.cgi?size" >-size</A></CODE>" input
setting with the first larger setting being ignored completely. On the other
hand the operational setting "<CODE><A HREF="../option_link.cgi?font"
>-font</A></CODE>" is set correctly for each of the individul "<CODE><A
HREF="../option_link.cgi?annotate" >-annotate</A></CODE>" operations.  </P>

This added complexity means that it is probably a good idea to...
<DIV ALIGN=center><B>    Mogrify images simply.   </B></DIV></P>

Do not attempt to do very long and complex "<code>magick</code>"-like
operations in a batch operation using "<CODE>mogrify</CODE>", it will probably
have 'setting' issues.  If you are really wanting to do complex processing,
write a shell/dos/perl script to use "<code>magick</code>" to process each
image one at a time, or go to an ImageMagick API interface. </P>

For examples of modifying lots of images using a script see <A
HREF="../advanced/" >Advanced ImageMagick Examples</A>. </P>

Just remember, "<CODE>mogrify</CODE>" is a dangerous command, and should
always be thoroughly tested on backup images, before putting into production.
</P>

Actually I also recommend that scripts include a quick 'tests' on things like
"<CODE>mogrify</CODE>" to make sure the command does not break anything (due
to version changes or differences in computer installations) before processing
a very large collection of images. That is do a small 'test case' and abort if
it fails to produce a correct, before proceeding. </P>

This is actually a good idea for any large scale image processing project, so
as to protect users from unforeseen consequences.  I do this myself in IM
Examples, and it has saved me a lot of trouble. </P>

<A NAME="mogrify_compose"></A>
<H4>Alpha Composition using "<CODE>mogrify</CODE>"</H4>

Because "<CODE>mogrify</CODE>" can not use <A HREF="#option_list"
>Multi-Image List Operators</A> it can not easily overlay thing like
logos, or mask images using <A HREF="../compose/#compose" >Alpha
Composition</A>. </P>

There is one exception to this, using "<CODE><A HREF="../option_link.cgi?draw"
>-draw</A></CODE>" to perform image alpha composition. This allows you to
specify the second image, as part of the operators arguments, outside of the
current image list. </P>

For example, here I first make a copy of the original images I want to process
using a special "<CODE><A
HREF="http://www.ict.griffith.edu.au/anthony/software/#mv_perl"
>cp_perl</A></CODE>" script.  I then create temporary circle 'mask' image,
which I then use to cut out a circle shape from all those images, using
"<CODE>mogrify</CODE>" with a '<CODE><A HREF="../compose/#dstin"
>Dst_In</A></CODE>' alpha composition method.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE OUT=/dev/null>
  cp_perl  's/^/mogrify_/'  eye.gif news.gif storm.gif tree.gif
  magick -size 32x32 xc:none -draw 'circle 15.5,15.5 15.5,0'  circle.gif
  mogrify  -alpha Set -draw 'image Dst_In 0,0 0,0 "circle.gif"'  mogrify_*.gif
</samp></pre></TD></TR></TABLE>
  <A HREF="../images/eye.gif"
     ><IMG SRC="../images/eye.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="../images/news.gif"
     ><IMG SRC="../images/news.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="../images/storm.gif"
     ><IMG SRC="../images/storm.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="../images/tree.gif"
     ><IMG SRC="../images/tree.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
<IMG SRC="../img_www/plus.gif" WIDTH=20 HEIGHT=20 ALIGN=middle ALT=" + ">
  <A HREF="circle.gif"
     ><IMG SRC="circle.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
<IMG SRC="../img_www/right.gif" ALIGN=middle WIDTH=20 HEIGHT=20 ALT="==>">
  <A HREF="mogrify_eye.gif"
     ><IMG SRC="mogrify_eye.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
  <A HREF="mogrify_news.gif"
     ><IMG SRC="mogrify_news.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
  <A HREF="mogrify_storm.gif"
     ><IMG SRC="mogrify_storm.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
  <A HREF="mogrify_tree.gif"
     ><IMG SRC="mogrify_tree.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</DIV></P>

Note that any Alpha Composition method can be used in this way, but only with
a constant 'source' or 'overlay' image being applied to all the images.  </P>

Also as "<CODE>mogrify</CODE>" will be reading the 'source' image multiple
times, I suggest you use the special IM specific "<A HREF="../files/#mpc"
>MPC:</A>" file format to reduce the overhead of decoding the image when
reading it over and over.  This image file format does not need to be parsed
by IM as it will be mapped directly from disk into memory (for the same
machine it was created on).  This saves a lot of processing time, especially
in dealing with a large number of images. </P>


<A NAME="mogrify_convert"></A>
<H4>Using Convert Instead of Morgify</H4>

Using a special technique to modify the output filename using <A
HREF="http://imagemagick.org/script/escape.php" >Percent Escapes</A>, (see <A
HREF="../files/#save_escapes" >Filename Percent Escapes</A>), you can replace
"<CODE><A HREF="#mogrify" >mogrify</A></CODE>" with a more versatile "<CODE><A
HREF="#convert" >convert</A></CODE>" command. </P>

Not only that but it will provide you with a more control of the final
destination name of the image. and let you better handle multi-image
processing such as compositions and animations. </P>

For example here I create thumbnails of images in the current directory,
inserting a "<CODE>_tn</CODE>" string into the input filename, to create the
appropraite output image filename.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick *.jpg   -thumbnail 120x90 \
          -set filename:fname '%t_tn' +adjoin '%[filename:fname].gif'
</samp></pre></TD></TR></TABLE>
</DIV></P>

Warning, do not include a different file suffix in the filename setting
itself.  IM will not see it when deciding on the image file format to use.
Note that IM can't decide from the filename it will fall back to the original
file format that was read in, so a clear suffix, or a coder prefix can be
important, when using this technique.  </P>

To get the exact original filename the source image came from use
"<CODE>%i</CODE>", "<CODE>%d/%f</CODE>" or "<CODE>%d/%t.%e</CODE>". Of course
these all have the filename suffix, in the filename setting, whch IM does not
use, but that should be okay as it is the same image file format.  </P>

The real problem with using "<CODE><A HREF="#convert" >convert</A></CODE>"
instead of "<CODE><A HREF="#mogrify" >mogrify</A></CODE>" is that ALL the
images are read into memory first!  Mogrify takes great pains to only
read/modify/write one file (though that file could contain multiple images) at
a time. But "<CODE><A HREF="#convert" >convert</A></CODE>" does not.   As such
you can very easily exceed memory limits if you are not careful. Though there
are ways around this. See examples in <A HREF="../files/#read_mods" >Read
Modifiers</A> and <A HREF="../thumbnails/" >Thumbnails</A>. </P>

Also as all the images are in memory as a single image list, you will need
to be careful on how you process those images.  For example you can not
directly use <A HREF="../compose/#compose" >Alpha Composition</A> as you
normally would, but may need to use the specialised <A
HREF="../anim_mods/#composite" >Multi-Image List Composition</A> to do the
job. </P>

Of course just as with "<CODE>mogrify</CODE>" this method of using
"<code>magick</code>" can be dangerous, as it could easily overwrite and
destroy the original image files. </P>


<A NAME="mogrify_not"></A>
<H4>Batch Processing Alternatives</H4>

If batch processing images using "<CODE>mogrify</CODE>" is not practical,
especially if you are copying the images rather than modifying them in place,
then it may be better to use some other non-IM looping solutions. These
include...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  # Use a simple shell loop, to process each of the images.
  mkdir thumbnails
  for f in *.jpg
  do   magick $f -thumbnail 200x90 thumbnails/$f.gif
  done

  # Use find to substitute filenames into a 'convert' command.
  # This also provides the ability to recurse though directories by removing
  # the -prune option, as well as doing other file checks (like image type,
  # or the disk space used by an image).
  find * -prune -name '*.jpg' \
         -exec  magick '{}' -thumbnail 200x90 thumbnails/'{}'.gif \;

  # Use xargs -- with a shell wrapper to put the argument into a variable
  # This can be combined with either "find" or "ls" to list filenames.
  ls *.jpg | xargs -n1 sh -c 'magick $0 -thumbnail 200x90 thumbnails/$0.gif'

  # An alternative method on linux (rather than plain unix)
  # This does not need a shell to handle the argument.
  ls *.jpg | xargs -r -I FILE   magick FILE -thumbnail 200x90 FILE_thumb.gif
</samp></pre></TD></TR></TABLE>
</DIV></P>

And so on. </P>

I recommend the use of  both "<CODE>find</CODE>" and "<CODE>xargs</CODE>"
 for doing recursive or even non-recursive
file processing.  Read their man pages. For a quick introduction see this <A
HREF="../forum_link.cgi?t=17400&p=65283" >IM Discussion Post</A>, as well as
the guide <A HREF="http://en.wikipedia.org/wiki/Xargs" >Xargs - Wikipedia</A>
which includes information on the dangers involved. </P>

If your commands start to get more complicated than this, it may be time to go
to a shell script, or API program, to read in multiple images, gather
information, calculate appropriate arguments, and process the images. </P>

I also recommend a good look at the "<CODE><A
HREF="http://www.gnu.org/software/parallel/" >parallel</A></CODE>" command
(typically a drop in replacement for "<CODE>xargs</CODE>").  This can not only
let you run multiple commands simultaneously, but can with a little work run
each command on different computers, allowing you to do network distributed
processing of a very large number of tasks. </P>

For Windows Users I refer you to the <A HREF="../windows/" >Windows Usage</A>
section, and in particular <A HREF="../windows/#for_loops" >Windows, Batch
Processing Several Files</A>. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Remember "<CODE><A HREF="#mogrify" >mogrify</A></CODE>", and all other IM
  commands will also expand all filenames containing shell meta-characters
  such as '*' and '?'.  This is done to allow the use of these meta-characters
  on the old DOS command line shell. However this could cause a bug, repeated
  mogrify execution, or possibly even a 'hack' from a some evil source that
  provided the filename to use.  Caution and complete understanding of
  security issues is advised.

</I></FONT></TD></TR></TABLE></P>

<BR>

<A NAME="composite"></A>
<H3>Composite -- overlaying images in special ways</H3>

The "<CODE>composite</CODE>" command is designed specifically for simple alpha
compositing (overlaying) of two images together in various ways.  This
includes limiting the area in which images are combined together, though the
use of a third masking image. </P>

Unlike "<code>magick</code>" the "<CODE>composite</CODE>" command is a very
traditional command in that it will read all its options and settings, before
it actually performs the single image processing operation it was designed to
do. </P>

The "<CODE>composite</CODE>" command also provides simple access to some
of the more complex alpha composition modes. For example "<CODE><A
HREF="../option_link.cgi?dissolve" >-dissolve</A></CODE>", "<CODE><A
HREF="../option_link.cgi?blend" >-blend</A></CODE>", and "<CODE><A
HREF="../option_link.cgi?watermark" >-watermark</A></CODE>" image composition.
If any of these arguments are given, they will override any other "<CODE><A
HREF="../option_link.cgi?compose" >-compose</A></CODE>" setting that was (or
will be) given for that command. </P>

Note also that the "<CODE><A HREF="../option_link.cgi?tile" >-tile</A></CODE>"
setting also works differently to that of either "<code>magick</code>" or
"<CODE>montage</CODE>" and "<CODE>display</CODE>". In "<CODE>composite</CODE>"
this will cause the overlaid image to be tiled across the whole of the
background image. Something not yet available in other IM commands. </P>

While these special features makes "<CODE>composite</CODE>" an useful command,
the alpha compositing is now also available for use in the
"<code>magick</code>" command. (For details see <A HREF="../compose/#compose"
>Alpha Composition in IM</A>). </P>

For a summary of multiple different ways of overlaying two or more images
together see the examples in <A HREF="../layers/#composition" >Compostion of
Mutliple Pairs of Images</A>.  </P>

For more information on the method by which two images can be merged together
see the <A HREF="../compose/" >Alpha Compositing</A> examples page. </P>

The overlay limiting or 'Masking' abilities is also detailed in the above
examples page in <A HREF="../compose/#mask" >Using a Compose Mask to Limit the
Composed Area</A>.   </P>


<A NAME="montage"></A>
<H3>Montage -- generating arrays of thumbnails</H3>

The special IM image indexing command "<CODE>montage</CODE>" also followed the
same 'do it as you see it' style of command line structure, as
"<code>magick</code>". </P>

The only difference is that when the end of the command is reached (other that
the final output image filename argument), "<CODE>montage</CODE>" will start to
process the image list into a thumbnail image index page(s), according to
the settings that are currently set. </P>

This makes "<CODE>montage</CODE>" much more versatile than it was in IM
version 5, as you can now process the images just as you would in
"<code>magick</code>", then set all the "<CODE>montage</CODE>" settings you
want, and let it finish the job. </P>

For more details about "<CODE>montage</CODE>" see <A HREF="../montage/"
>Montage, Arrays of Thumbnails</A>. </P>

<BR>

<A NAME="display"></A>
<H3>display
<FONT SIZE=-1>-- Slideshows of Images</FONT></H3>

The "<CODE>display</CODE>" program is designed to display an image, or list
of images in the form of a looped slideshow.  It is not designed for a
carefully orchestrated and timed animation of images,  for that use the
"<CODE><A HREF="#animate" >animate</A></CODE>" command. </P>

Each image will be displayed in a window sized appropriately for the image,
unless other options (like window "<CODE><A HREF="../option_link.cgi?geometry"
>-geometry</A></CODE>", see below) override this behaviour. The image will
also generally be displayed on a checkerboard background so as to show the
effects of any transparency the image may have (see below). </P>

Remember this is NOT designed for the display of an animation, but as
a slideshow of actual images. As such some caution may be needed when using
display in a scripting program. </P>

<B>Image Display Time, Loop, and other options</B></P>

By default a delay of approximately 2 seconds is used on top of whatever delay
the user specifies using the "<CODE><A HREF="../option_link.cgi?delay"
>-delay</A></CODE>" setting. However you can make it wait for user input
(spacebar) by using the option "-delay 0".

However defaults can be overridden by the images themselves, depending on
there file format. As such animation formats like <A HREF="../formats/#gif"
>GIF</A> and <A HREF="../files/#miff" >MIFF</A> could result in either
a pause, or a 2 second plus the images meta-data delay setting.  It is thus
recommended that you always set a "<CODE><A HREF="../option_link.cgi?delay"
>-delay</A></CODE>" as appropriate (remember "<CODE>-delay 5x1</CODE>" will
delay 5+2 or about 7 seconds) for your script and needs. </P>

The same goes for the "<CODE><A HREF="../option_link.cgi?loop"
>-loop</A></CODE>" setting.  By default "<CODE>display</CODE>" loops forever
("<CODE>-loop 0</CODE>") but image formats like <A HREF="../files/#miff"
>MIFF</A> or <A HREF="../formats/#gif" >GIF</A> can override this so as to
cause it to exit after last image in the loop. See the "<CODE><A
HREF="../option_link.cgi?loop" >-loop</A></CODE>" option appropriately for
your situation. </P>

Note that "<CODE>display</CODE>" will not handle any <A
HREF="../anim_basics/#gif_anim" >GIF Animation Settings</A> so frames are not
disposed of, and virtual canvas sizes and offsets are ignored.  In other words
you will see the raw partial images in a GIF animation, not the correctly
overlaid image.  It does provide a "<CODE><A
HREF="../option_link.cgi?coalesce" >-coalesce</A></CODE>" option to clean up
such animations for display purposes.  </P>

<H4>Transparency Handling</H4>

Images containing a full alpha channel (EG PNG and MIFF formats) will be
overlaid onto a 'checkerboard' background pattern, so as to let you see the
effects of any semi-transparency, such as shadow effects. </P>

You can change that by selecting a different background with
"<CODE><A HREF="../option_link.cgi?texture" >-texture</A></CODE>" such as...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  display -texture granite: test.png

  display -texture xc:black test.png
</samp></pre></TD></TR></TABLE>
</DIV></P>

Images with a palette (or boolean) transparency, such as GIF and PNG8 formats,
is displayed with a the current 'transparent color' that was used to represent
transparency in the color table.  That is a generally random color may be used
(typically black) rather than the default checkerboard pattern.  This could be
regarded as a bug, though technically it isn't. </P>

However if you like display to handle such images in the same way as other
images containing transparency information, you can remove the palette
meta-data before feeding the image to "<CODE>display</CODE>" using the
following commands to change the internal style for the image output format.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick image.gif -type truecolormatte miff:- | display -
</samp></pre></TD></TR></TABLE>
</DIV></P>

Alternatively, just about any operation that modifies the image being
displayed will also remove the existing palette meta-data.  As such some
"<CODE>display</CODE>" options can be used to remove the palette. For example
using "<CODE><A HREF="../option_link.cgi?coalesce" >-coalesce</A></CODE>".

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  display -coalesce image.gif
</samp></pre></TD></TR></TABLE>
</DIV></P>

This has the added bonus of cleaning up GIF animation optimizations that may
be present.  Though for multiple, unrelated images it could have other
undesirable side effects. </P>

Yes these methods are clumsy, but they work. </P>


<A NAME="display_convert"></A>
<H4>Display Using Convert</H4>

An alternative display method (other than using "<CODE>animate</CODE>", see
next) is to use the simpler  "<CODE>x:</CODE>" output image format (See <A
HREF="../files/#show" >display output format</A>).

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick image.png x:
</samp></pre></TD></TR></TABLE>
</DIV></P>

This method does not provide a backdrop window, menu options, or other
controls. It just simply displays the images one image at a time. </P>

If you do want to just simple 'display' the resulting image the special
'<CODE>show:</CODE>' or '<CODE>win:</CODE>' output <A
HREF="../files/delegate_spawn" >Spawning Delegate</A> will do the same thing
by runing the "<CODE><A HREF="#display" >display</A></CODE>" command on the
output image, and exiting without waiting for that window to be closed.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick image.png show:
</samp></pre></TD></TR></TABLE>
</DIV></P>


<H4>Display Output Size</H4>

Display will not scale an image to fit it to the X window display.  The window
size will be adjusted to fit each image, unless set using the "<CODE><A
HREF="../option_link.cgi?geometry" >-geometry</A></CODE>" setting. That
setting can also be used to fix the windows position on the X window display.
</P>

Images which are larger that the screen, will also not be resized, but
will overflow the screen, display will however also provide a 'scroll
window' to let the user slide around the image. </P>

This can be painful when viewing a modern high resolution digital photo. </P>

To limit display to say a 800x600 pixel area (only resize smaller, never
larger), use...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  display -resize 800x600\> photo.jpg
</samp></pre></TD></TR></TABLE>
</DIV></P>

For JPG images you can speed up the image read by using a special
jpeg input size hint setting. See <A HREF="../formats/#jpg_read" >Reading JPEG
Control Options</A>.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  display -define jpeg:size=1600x1200 -thumbnail 800x600\> photo.jpg
</samp></pre></TD></TR></TABLE>
</DIV></P>

If the image is from a modern digital camera you can also use "<CODE><A
HREF="../option_link.cgi?auto-orient" >-auto-orient</A></CODE>" to correct the
camera rotation of the displayed image, using the EXIF meta-data in the image
file format. </P>

If you don't want menus, you can turn them off using the "<CODE><A
HREF="../option_link.cgi?immutable" >-immutable</A></CODE>" setting to
"<CODE>display</CODE>", so it knows not to allow editing. </P>

<A NAME="display_script"></A>
<H4>Scripted use of Display</H4>

With these options in mind, the following is my recommendation for using
"<CODE>display</CODE>" to display results from a complex shell script...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  display -delay 0 -loop 1 -coalesce -resize 800x600\>   some_random_image
</samp></pre></TD></TR></TABLE>
</DIV></P>



<A NAME="display_X_windows"></A>
<H4>Display with X Windows</H4>

The option "<CODE><A HREF="../option_link.cgi?window" >-window</A> root</CODE>"
can be used to display an image on the X window background (root) window. In
this case the "<CODE>display</CODE>" program automatically exits. </P>

By default an image is tiled across the background. For example try this..

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  display -window root pattern:checkerboard
</samp></pre></TD></TR></TABLE>
</DIV></P>

For many other examples of image tiles, and generating them see <A
HREF="../canvas/#tile" >Tiled Canvases</A>, and <A HREF="../backgrounds/"
>Background Image Examples</A>.  </P>

If you want to use a single image for your X Windows background, you may need
to know the size of your X window display.  The "<CODE>xdpyinfo</CODE>" program
while not part of ImageMagick, can give you that information.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  xdpyinfo | grep dimensions:
</samp></pre></TD></TR></TABLE>
</DIV></P>

And here we use the output of "<CODE>xdpyinfo</CODE>", to resize an image to
fill the X window background completely.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  screen_size=`xdpyinfo | sed '/dimensions:/!d;s/^[^0-9]*//;s/ pixels.*//'`
  display  -resize $screen_size! -window root photo.jpg
</samp></pre></TD></TR></TABLE>
</DIV></P>


<A NAME="display_remote"></A>
<H4>Display Remote Control</H4>

Display does provide a special "<CODE><A HREF="../option_link.cgi?remote"
>-remote</A></CODE>" option.  This will look for an already running
"<CODE>display</CODE>" command and will then pass the given arguments to it.
</P>

For example...
<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  display wizard: &
  sleep 5
  display -remote logo: &
</samp></pre></TD></TR></TABLE>
</DIV></P>
Will display the built in "wizard" image in a backgrounded command.  The
script will then wait 5 seconds before replace it with the built-in "logo"
image.</P>

Note that if no "<CODE>display</CODE>" command is running, the current command
will open a window and not exit.  As such you should also background the
"<CODE>display -remote</CODE>" commands as a precaution. </P>

At this time you can not request a remote "<CODE>display</CODE>" to exit. As
such the best way to close the remote display is to either kill the running
process, or 'delete' the display window using some X window command. </P>

For example (using the non-IM command "<CODE>xdotool</CODE>")...
<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  xdotool search -class "display" windowkill
</samp></pre></TD></TR></TABLE>
</DIV></P>



<A NAME="animate"></A>
<H3>animate
<FONT SIZE=-1>-- Show an animation of images</FONT></H3>

In many ways "<CODE>animate</CODE>" and "<CODE><A HREF="#display"
>display</A></CODE>" are extremely similar. </P>

However "<CODE><A HREF="#display" >display</A></CODE>" only shows the images
in the given image file 'as-is' without change, adding an minimal 2 second
pause between each frame for user input. </P>

"<CODE>animate</CODE>" on the other hand will apply any <A
HREF="../anim_basics/#gif_anim" >GIF Animation Settings</A> that are saved
with the image, and only display each image according to its 'time delay'
settings, looping back to the start to repeat the animation.  In other words
"<CODE>animate</CODE>" 'animates' animation formats properly where "<CODE><A
HREF="#display" >display</A></CODE>" does not. </P>

However because of this, the virtual canvas of the first image will control
the output image size, and other image will be overlaid into that image area.
</P>

Of course as the images are animated, you do have a fine control of the image
display timing, using options such as "<CODE><A
HREF="../option_link.cgi?delay" >-delay</A></CODE>".  The command also has an
extra argument "<CODE><A HREF="../option_link.cgi?pause" >-pause</A></CODE>"
to add an extra pause at the end of the animation loop, beyond whatever the
final frames "<CODE><A HREF="../option_link.cgi?delay" >-delay</A></CODE>"
setting specifies. </P>

For example you can use "<CODE>animate</CODE>" to generate a <A
HREF="../compare/#flicker" >Flicker Comparison</A> of two very similar images,
using something like..

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick image1.png image2.png -scale 400% miff:- |\
     animate -delay 50 -loop 0 -
</samp></pre></TD></TR></TABLE>
</DIV></P>

I have written a script to take advantage of this method called "<CODE><A
HREF="../scripts/flicker_cmp" >flicker_cmp</A></CODE>", and find it extremely
useful to pickup very subtle changes in pixel intensity that I would otherwise
miss. </P>

<BR>

<A NAME="compare"></A>
<H3>compare
<FONT SIZE=-1>-- Look for Differences</FONT></H3>

All current information on this is on the <A HREF="../compare/" >Image
Comparison Page</A> section of IM Examples. </P>


<A NAME="stream"></A>
<H3>stream
<FONT SIZE=-1>-- pipeline processing of massive images</FONT></H3>

"<CODE>stream</CODE>" is a special program that is designed to handle
extracting a portion of a very large image file. It is the only such program
within ImageMagick, all others read the images completely into memory before
processing (the exception is JPEG images via the "<CODE><A
HREF="../option_link.cgi?size" >-size</A></CODE>", as this option is passed to
the JPEG delegate library).</P>

You can select a portion of the image with the "<CODE><A
HREF="../option_link.cgi?extract" >-extract</A></CODE>" setting.  And you can
specify the depth of the raw bytes with "<CODE><A
HREF="../option_link.cgi?depth" >-depth</A></CODE>" setting.  And finally, you
can select which color channels to extract using the "<CODE><A
HREF="../option_link.cgi?channel" >-channel</A></CODE>" option. </P>

However "<CODE>stream</CODE>" will only output the raw color bytes of the
image (RAW format) as defined by the image depth, as such you may need to pipe
the output of the extracted segment into convert. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR VALIGN=bottom><TD width="100%" ALIGN=justify>

For example...

<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  stream -map rgb -storage-type char -extract 100x100+200+100 logo: - |\
    magick -depth 8 -size 100x100 rgb:-   stream_wand.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="stream_wand.gif"
     ><IMG SRC="stream_wand.gif"          WIDTH=100 HEIGHT=100
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

For more information and examples see <A HREF="../files/#massive" >Really
Massive Image Handling</A>. </P>


<A NAME="import"></A>
<H3>import
<FONT SIZE=-1>-- read images from the on screen display</FONT></H3>

The "<CODE>import</CODE>" command is a special program that can be used to
grab and extract images from an X windows display.

For example lets get it to grab and print a window you select from your
display...
<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  import -page A4 -gravity center ps:- | lpr
</samp></pre></TD></TR></TABLE>
</DIV></P>

It is actually rarely used as the special file format "<CODE><A
HREF="../file/#x" >X:</A></CODE>" also provides exactly the same functionality
from within the magick command.  </P>

The only difference between the two is that "<CODE>import</CODE>" has more X
window specific settings than the "<CODE><A HREF="../file/#x" >X:</A></CODE>"
format, such as specifying the display, screen, and/or window ID, the image is
to be grabbed from. </P>

Other options include controls display 'beeping' and repeated snapshots.  </P>

If no specific window is specified, the mouse can be used to select what parts
of the display the user wants to grab as an image. </P>
<UL>
<LI>If a single mouse click is used the whole window clicked in is grabbed and
    returned as an image.  Note that if any other windows on the display is
    obscuring part of the window selected, then you will grab an image of the
    obscuring other windows are obscuring the selected window being grabbed.
    </P>
<LI>A click in the root window, or selecting "<CODE>-window root</CODE>" will
    return the whole screen. </P>
<LI>If a mouse click and drag is used a <A HREF="../crop/#crop" >Cropped</A>
    section of the whole screen is returned, which of course also means the
    location (virtual canvas offset) on the whole display (virtual canvas, or
    page, size) is also returned. </P>
</UL></P>

Other options allow you to avoid human interaction with the mouse by grabbing
the whole screen ("-window root"), or a specific window, given a window title,
or a X window ID, which you can find using the X window utility
"<CODE>xwininfo</CODE>". You can also cut down the area of the selected window
using "<CODE><A HREF="../option_link.cgi?extract" >-extract</A></CODE>". </P>

See also the special input format,  "<CODE><A HREF="../files/#x"
>X:</A></CODE>" as an alternative to using "<CODE>import</CODE>". </P>

<PRE>
    Note to import from the Windows clipboard use
      magick clipboard:myimage image.png
    and not "import"
</PRE>

<A NAME="conjure"></A>
<H3>conjure
<FONT SIZE=-1>-- IM experimental scripting language</FONT></H3>

Was originally designed to allow scripted Imagemagick use, with the use of
multiple image lists, but the improvements made to IM v6
"<code>magick</code>" has seen this experimental API fall into disuse. </P>

It is an XML based language.  Though if you want XML, SVG may be
better for your needs. </P>

In my opinion, using the "<CODE>conjure</CODE>" script is probably better and
easier when dealing with multi-image list. And is being used, though not very
widely, due to lack of examples and support by users.  </P>

<HR><!-- ---------------------------------------------------------------- -->

<A NAME="image_lists"></A>
<H2>Image Lists...</H2>

One of the most important points to remember with ImageMagick, and one that
confuses both new users and experienced users, is that... </P>

<DIV ALIGN=center><B>
      ImageMagick works with Ordered Lists of Images, not single images
</B></DIV></P>

That is IM deals not with just one image, but potentially an ordered list of
images, be they separate individual images, a set of images that layer on top
of each other, or the frames of an animation. </P>

Also in general all image operators will be applied to <I>all the images in
the current list</I>. </P>

As such if you use a "<CODE><A HREF="../option_link.cgi?draw"
>-draw</A></CODE>" operator, it will not only draw on the last image in the
list, as many new users would assume, but it will draw onto <I>all</I> the
other images in the current image list, and does so to each image in turn.
</P>

Image Layering Operators, such as "<CODE><A HREF="../option_link.cgi?coalesce"
>-coalesce</A></CODE>" and "<CODE><A HREF="../option_link.cgi?layers"
>-layers</A></CODE>" will replace each image in the list with a new image
modified according to the other images in the list. It may even add or
remove extra images! </P>

Also Image List Operators, like "<CODE><A HREF="../option_link.cgi?append"
>-append</A></CODE>", "<CODE><A HREF="../option_link.cgi?mosaic"
>-mosaic</A></CODE>", and "<CODE><A HREF="../option_link.cgi?fx"
>-fx</A></CODE>", will replace ALL the images in the current image list
with the resulting combined image.  That is it will destroy all the images,
unless they were previously saved using <A HREF="#parenthesis"
>Parenthesis</A>, and <A HREF="#clone" >Cloned Images</A> were used. See <A
HREF="#list_ops" >Image List Operators</A> below for practical examples.
</P>

Finally when a new image is read in or created, IM only adds that new image to
the end of the current image list (which always exists).  Some formats
(like <A HREF="../formats/#gif" >GIF</A>) may actually add multiple images to
the current image list, unless a special <A HREF="../files/#read_mods"
>Indexing Read Modifier</A> is added to the input filename, to limit what is
read in. </P>

When saving images, IM will save the whole image list that is in memory at
the time of writing.  If image format allows it IM will write ALL the images
into a single file.  If the format does NOT allow multiple images (for example
JPEG), it will write the images into separate files (See <A
HREF="../files/#write_list" >Writing a Multiple Images</A>).  </P>


<A NAME="parenthesis"></A>
<H3>Parenthesis -- processing images 'on-the-side'</H3>

With the formalization of the command line options, the processing order is
now exactly predictable, and it has also become possible to add parenthesis
(or brackets) to the image processing.  This has been a desired feature by IM
users for a long time, and allows you to do things never before possible in a
single command. </P>

The opening bracket '<CODE>(</CODE>' will in affect start a new image
list, that all enclosed operators will work on. The matching close bracket
'<CODE>)</CODE>' will then add the resulting image list (which may be more
than one image, or none at all) to the end of the previous image list.
</P>

In other words, using parenthesis means...
<DIV ALIGN=center><B>
        <I>"I need to do a bit of work in a separate image list <BR>
        before adding the results to the end of previous list."</I>
</B></DIV></P>

It allows you to work on a sub-set of images, like a scratch pad, than add the
result back into the main image list without affecting the images you have
already previously read in or have been working on. </P>

Let's look at some simple examples...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick  eye.gif  storm.gif  -negate  +append  cmd_negate.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="cmd_negate.gif"
     ><IMG SRC="cmd_negate.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

As you can see the "<CODE><A HREF="../option_link.cgi?negate"
>-negate</A></CODE>" operator, color negated both images, as both were in the
current image list in memory at that time. </P>

But by adding parenthesis we can limit the negation to just the second
image...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick  eye.gif \(  storm.gif  -negate \) +append  cmd_bracket.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="cmd_bracket.gif"
     ><IMG SRC="cmd_bracket.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Because the "<CODE>storm.gif</CODE>" image is read into a separate image
list to that of the first image (generated by the "<CODE>(</CODE>" image
list operator), it can be negated without affecting the first image.  Then
we can add the result to the main image list (that is the "<CODE>)</CODE>"
operator), before appending the two images together as before. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Parenthesis must be given as a separate argument.  That is you must separate
  them from the other arguments by spaces.  You can not add them hard up
  against neighbouring arguments.  In other words in the IM command line
  argument "<CODE> \(+clone </CODE>" is wrong, while "<CODE> \( +clone
  </CODE>" is correct. </P>

  Also in the last example I needed to put a backslash '<CODE>\</CODE>' before
  the parenthesis.  That is because when using IM on an UNIX (linux) machine,
  parenthesis has special meaning to the command line shell.  As such I need
  to escape, or quote the bracket symbols, when I use them. </P>

  Windows DOS scripts do not require parenthesis to be escaped with backslash.
  See <A HREF="../windows/" >Windows DOS Scripts</A> for this and other
  differences to linux scripting. </P>

</I></FONT></TD></TR></TABLE></P>

Parenthesis also make it possible to do something not previously possible to
do in a single "<code>magick</code>" command.  Generating arrays of images!

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick eye.gif news.gif  +append \
         \( storm.gif tree.gif +append \)   -append  cmd_array.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="cmd_array.gif"
     ><IMG SRC="cmd_array.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Arrays like this were of course possible using "<CODE>montage</CODE>" (see <A
HREF="../montage/#concatenate" >Montage Concatenation Mode</A>),  But using a
separate command makes image processing scripts more complex. </P>

Of course if you like to make the command look more array like itself, you are
free to add some extra parenthesis. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick \( eye.gif    news.gif  +append \) \
          \( storm.gif  tree.gif  +append \) \
          -append  cmd_array2.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="cmd_array2.gif"
     ><IMG SRC="cmd_array2.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

The first set of parenthesis aren't strictly needed, and do add a tiny amount
of extra work to IM's internal processing, but it does make it clear what the
command is doing by separating the processing steps. </P>

It may also be easier for image processing scripts to perform each processing
step as a separate parenthesis, as a means of separating the processing steps,
it is applying. </P>


<A NAME="respect-parenthesis"></A>
<H3>Parenthesis and Settings</H3>

Option 'settings' are not affected by parenthesis, and will continue across
the parenthesis image operators, until the setting is changed or turned off.
</P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR VALIGN=bottom><TD width="100%" ALIGN=justify>
For example...

<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -pointsize 24 \
          -font Candice label:Outside \
          \(              label:Inside \
             -font Gecko  label:Inside \) \
          label:Outside       -append   cmd_settings.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="cmd_settings.gif"
     ><IMG SRC="cmd_settings.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Note how the first "<CODE>-font Candice</CODE>" setting is NOT reset back to
its default setting when the parenthesis is entered, while the second
"<CODE>-font Gecko</CODE>" is not replaced by the original font setting when
you leave parenthesis. </P>

In other words...
<DIV ALIGN=center><B>
        Parenthesis only create a separate Image Sequence. <BR>
   They do not limit settings, only the images being worked on.
</B></DIV></P>

As of IM v6.4.1-4 the new operational control option "<CODE><A
HREF="../option_link.cgi?respect_parenthesis"
>-respect-parenthesis</A></CODE>" can override this behaviour. </P>

When given at the start of an IM command, it will cause parenthesis to also
save and retrieve the previous settings that have been given.  That means any
settings given within parenthesis, will only remain set, until the end of the
parenthesis.  </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR VALIGN=bottom><TD width="100%" ALIGN=justify>
For example...

<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -respect-parenthesis   -pointsize 24 \
          -font Candice label:Outside \
          \(              label:Inside \
             -font Gecko  label:Inside \) \
          label:Outside       -append   cmd_settings2.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="cmd_settings2.gif"
     ><IMG SRC="cmd_settings2.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

As you can see, when the parenthesis ended, the font setting was restored to
the previous 'Candice' font, instead of the 'Gecko' font that was set within
the parenthesis. </P>

This can be most useful when you have to change a lot of setting, for just a
short time...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -respect-parenthesis \
          -font Arial   label:"This is a line of plain text." \
          \( -font Candice -pointsize 16 -fill red -undercolor lightblue \
              label:"A line using a lot of different settings." \) \
          label:"Text is back to normal -- like Magick\!" \
          -append  cmd_settings_lots.gif
</samp></pre></TD></TR></TABLE>
  <A HREF="cmd_settings_lots.gif"
     ><IMG SRC="cmd_settings_lots.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>


<A NAME="list_ops"></A>
<H3>Image List Operators</H3>

With the stronger emphasis by IM on image sequences, especially within
parenthesis, it is no surprise that a set of new image operators have been
provided to manipulate the image lists. <P>

The arguments to these operators are numbers indexing the image list,
starting with zero ('<CODE>0</CODE>') for the first image, and one
('<CODE>1</CODE>') for the second image, and so on.  However if you give a
negative index, the images are referenced from the end (last image added) of
the image list.  That is an index of '<CODE>-1</CODE>' is the last image in
the current image list (generally the last image read or created),
'<CODE>-2</CODE>' for the second last and so on. </P>

<BR>

<A NAME="delete"></A>
<H4><CODE>-delete {index_range_list}</CODE></H4>

The "<CODE><A HREF="../option_link.cgi?delete" >-delete</A></CODE>" list
operator is the simplest of the image list operators, it just deletes
images from the current image list.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif -delete 1 +append  seq_delete.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_delete.gif"
     ><IMG SRC="seq_delete.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

The 'plus' form of the operator, "<CODE><A HREF="../option_link.cgi?delete"
>+delete</A></CODE>" does not take an argument, and just deletes the last
image in the current image list. </P>

The "<CODE><A HREF="../option_link.cgi?delete" >-delete</A></CODE>" operator
will also accept a comma separated list of numbers, or a number range to be
deleted.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-7].gif -delete 1-4,6 +append  seq_delete2.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_delete2.gif"
     ><IMG SRC="seq_delete2.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Or delete everything (and add a new image)...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-7].gif -delete 0--1  tree.gif seq_delete3.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_delete3.gif"
     ><IMG SRC="seq_delete3.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

The '<CODE>0--1</CODE>' argument means delete images from first image (index
0) to the last image (index -1).  In other words ALL images in the current
image list.  The tree image was then added to give IM an actual result, so
as to avoid a 'no image' type error. A "<CODE><A HREF="../files/#null"
>NULL:</A></CODE>" output image could also have been used, to produce no
output.  </P>

If an image index does not exist, or a number range is reversed, "<CODE><A
HREF="../option_link.cgi?delete" >-delete</A></CODE>" will silently ignore
that specific image deletion. </P>

For example, the argument '<CODE>-25</CODE>' will attempt to delete the last
25th image in the image list, but will silently do nothing if less than 25
images are present.  As such you can generate a rolling animation of 24 images
using a sequence like...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE NO_EXECUTE>
  magick animation.gif  new_frame.gif  -delete -25  animation_new.gif
</samp></pre></TD></TR></TABLE>
</DIV></P>

However no image will be deleted if the number of images was 24 or less.  As
a result the animation will grow by one frame, every time the command is run,
until a maximim of 24 frames is reached. After that the oldest (first) frame
will be delete while a new frame is added. </P>

As of IM v6.3.4 "<CODE><A HREF="../option_link.cgi?delete"
>-delete</A></CODE>" will not delete images that result in the numbered range
being reversed. </P>

That means that last example could be re-written like this...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE NO_EXECUTE>
  magick long_animation.gif  new_frame.gif  -delete 0--25  animation_new.gif
</samp></pre></TD></TR></TABLE>
</DIV></P>

This time the "<CODE><A HREF="../option_link.cgi?delete" >-delete</A></CODE>"
will delete all images between the first, to the last 25th image, leaving at
most 24 images in the list.  If only 24 or less images are present, the given
range of images to be deleted will be effectively reversed, and the "<CODE><A
HREF="../option_link.cgi?delete" >-delete</A></CODE>" operator will not delete
anything. </P>


<A NAME="insert"></A>
<H4><CODE>-insert {index}</CODE></H4>

The "<CODE><A HREF="../option_link.cgi?insert" >-insert</A></CODE>" operation
is sort of the opposite of "<CODE><A HREF="../option_link.cgi?delete"
>-delete</A></CODE>".  It will take the last image in the current image
list and insert so that it is positioned at the given index.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif tree.gif -insert 1 +append seq_insert.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_insert.gif"
     ><IMG SRC="seq_insert.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

You can think if the insert index as the number of images that should appear
before the point where the image was inserted. </P>

Of course the image that was at that index (and all the images after it), will
be bumped up into the next index position to make room for the new image. </P>

If a negative index position is used, the insert position is calculated after
the image being inserted is removed from the end of the list. That is it
will act as if the image being inserted was not part of the original image
list.  As such "<CODE>-insert -2</CODE>" will 'roll' the last three
images, placing two images between the newly inserted image and the end of the
image list.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif tree.gif -insert -2 +append seq_insert2.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_insert2.gif"
     ><IMG SRC="seq_insert2.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

The plus form "<CODE><A HREF="../option_link.cgi?insert" >+insert</A></CODE>"
will move the last image to the front of the image list (index
<CODE>0</CODE>), effectively rolling the whole image list by one frame.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif tree.gif +insert +append seq_insert3.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_insert3.gif"
     ><IMG SRC="seq_insert3.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

To do the inverse of the above (move an image to the end of the image
list), can be done by first using "<CODE><A
HREF="../option_link.cgi?duplicate" >-duplicate</A> 1,0</CODE>" to copy the
first image, then use "<CODE><A HREF="../option_link.cgi?delete" >-delete</A>
0</CODE>" to delete the first image. </P>

<BR>

<A NAME="swap"></A>
<H4><CODE>-swap {index}[,{index}]</CODE></H4>

Simply put "<CODE><A HREF="../option_link.cgi?swap" >-swap</A></CODE>", will
swap the positions of two images in the current image list.  For example
"<CODE>-swap 0,2</CODE>" will swap the first and the third images in the
current image list.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif  -swap 0,2  +append  seq_swap.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_swap.gif"
     ><IMG SRC="seq_swap.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

The plus form of this option "<CODE><A HREF="../option_link.cgi?swap"
>+swap</A></CODE>" will swap the last two images in the current image
list. In other words, it is equivalent to "<CODE>-swap
-2,-1</CODE>".

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif  +swap  +append  seq_swap2.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_swap2.gif"
     ><IMG SRC="seq_swap2.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Probably the most common use of this operator is to swap two images before
being used by an image layering operator such as "<CODE><A
HREF="../option_link.cgi?composite" >-composite</A></CODE>", "<CODE><A
HREF="../option_link.cgi?flatten" >-flatten</A></CODE>", "<CODE><A
HREF="../option_link.cgi?append" >-append</A></CODE>", or "<CODE><A
HREF="../option_link.cgi?fx" >-fx</A></CODE>".

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick tree.gif  frame.gif   +swap \
          -gravity center  -composite   framed_tree.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="framed_tree.gif"
     ><IMG SRC="framed_tree.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

As of IM v6.4 a "<CODE><A HREF="../option_link.cgi?swap" >-swap</A></CODE>"
with a single number will swap the last image with the number given.  That is
"<CODE>-swap 1</CODE>"  is equivalent to a "<CODE>-swap 1,-1</CODE>".

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif  -swap 1  +append  seq_swap3.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_swap3.gif"
     ><IMG SRC="seq_swap3.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

<BR>

<A NAME="reverse"></A>
<H4><CODE>-reverse</CODE></H4>

The "<CODE><A HREF="../option_link.cgi?reverse" >-reverse</A></CODE>" operator
(added to IM v6.3.4) will quite simply reverse the order of the whole image
list.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif -reverse  +append seq_reverse.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_reverse.gif"
     ><IMG SRC="seq_reverse.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

It is basically an ultimate <A HREF="#swap" >Swap Operator</A>. </P>

<BR>

<A NAME="clone"></A>
<H4><CODE>-clone {index_range_list}</CODE></H4>

This image list operator is a little different. Given an image list
number "<CODE><A HREF="../option_link.cgi?clone" >-clone</A></CODE>" will make
a copy of an image that has been saved by the 'open bracket' or 'parenthesis'
operator.  That is... </P>

<DIV ALIGN=center><B>
            Clone should only be used within parenthesis
</B></DIV></P>

The reason for this is that it allows you to extract a copy of an image from
the last saved (pushed) image list, so you can process it further.  For example.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-2].gif \( -clone 1 -rotate 90 \) +append  seq_clone.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_clone.gif"
     ><IMG SRC="seq_clone.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

The 'plus' argument-less form "<CODE>+clone</CODE>" will just make a copy of
the last image of the saved (pushed) image list so that you can process it
further

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-2].gif \( +clone -flip \) +append  seq_clone2.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_clone2.gif"
     ><IMG SRC="seq_clone2.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

As of the release of version 6.2.2 "<CODE><A HREF="../option_link.cgi?clone"
>-clone</A></CODE>" operator will take a comma separated list of images, or a
range of indexes of the form '<CODE><I>{index}-{index}</I></CODE>'.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-2].gif \( -clone 1-2 \) +append  seq_clone_range.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_clone_range.gif"
     ><IMG SRC="seq_clone_range.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Of course negative indexes still behave just as you would expect.  For example
to duplicate the whole image list you can specify it using numbers
'<CODE>0</CODE>' (first image) and '<CODE>-1</CODE>' (last image), that is by
using the range '<CODE>0--1</CODE>'.  It may look strange but it makes sense
and works fine.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-2].gif \( -clone 0--1 \) +append  seq_clone_all.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_clone_all.gif"
     ><IMG SRC="seq_clone_all.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

When you use a comma separated list of indexes, the images are extracted in
that order you specify.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-2].gif \( -clone 2,0,1 \) +append  seq_clone_list.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_clone_list.gif"
     ><IMG SRC="seq_clone_list.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

If the images in a range are reversed (after negative indexes are converted to
an actual image index), the extracted images is also reversed, as part of the
process.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-2].gif \( -clone 2-0 \) +append  seq_clone_reversed.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_clone_reversed.gif"
     ><IMG SRC="seq_clone_reversed.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

<BR>

The <A HREF="#clone" >Clone Image Operator</A> can be used without
parenthesis, and will just copy images from the current image list and
directly append them.  However this is not its intended use and is to be
discouraged as it will produce a different result if you later surround that
set of operations by parenthesis. </P>

Also in the examples above I am generating clones and appending them to the
current image list, to demonstrate the operator. In reality I should be
using the <A HREF="#duplicate" >Duplicate Image Operator</A> to duplicate
images in the current image list.  So should you, as it will make it clearer
what you are trying to do. </P>

The <A HREF="../files/#mpr" >MPR:</A> Image Memory Register, can also be used
to clone images and was available in IM v5.  It is actually still an useful
method for cloning and storing a whole image list (of unknown length) for
later use, and not just a single individual images as the above image list
operators do. </P>

<BR>

<A NAME="duplicate"></A>
<H4><CODE>-duplicate {count}[,{index_range}]</CODE></H4>

You can use "<CODE><A HREF="../option_link.cgi?duplicate"
>-duplicate</A></CODE>" to generate an extra copies (clones) of an image, from
the current image list (added IM v6.6.8-7).  The new images are added to
the end of the list. </P>

Unlike the previous (and older) <A HREF="#clone" >Clone Operator</A> it does
not require the use of parenthesis. </P>

For example to make N extra copies an image (to a total on N+1) you can do
this...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_5.gif   -duplicate 4   +append seq_duplicate.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_duplicate.gif"
     ><IMG SRC="seq_duplicate.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Note that this operator can generate hundreds of images very quickly, however
until the images are processed, the images are simply 'clones' of each other,
sharing the actual image data between them.  As such duplicated images are
very memory efficent. </P>


If more than one image is present, the last image is duplicated N times...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-1].gif   -duplicate 3   +append seq_dup_n.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_dupl_n.gif"
     ><IMG SRC="seq_dup_n.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

If you just want to duplicate the last image once, you can use the 'plus' form
of the argument.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif  +duplicate   +append seq_dup_last.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_dup_last.gif"
     ><IMG SRC="seq_dup_last.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

If you want to select a particular image mutliple times duplication you can
specify image index as a second argument.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-2].gif  -duplicate 2,0  +append seq_dup_index.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_dup_index.gif"
     ><IMG SRC="seq_dup_index.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

The index part of the argument can contain a list or range of image indexes to
be duplicated N times. For example duplicate the whole list twice to create
three times the original number of images...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-4].gif  -duplicate 2,0--1  +append seq_dup_list.gif
</samp></pre></TD></TR></TABLE>
  <A HREF="seq_dup_list.gif"
     ><IMG SRC="seq_dup_list.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</DIV></P>

A <A HREF="../anim_mods/#patrol" >Patrol Cycle</A> type of animation list is
also easy to create by using an image list that is reversed.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-9].gif -duplicate 1,-2-1 \
          -set delay 50 -set dispose previous -loop 0  seq_reverse_anim.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_reverse_anim.gif"
     ><IMG SRC="seq_reverse_anim.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Note that I did not copy the whole image list, but skipped copying the very
first (<CODE>0</CODE>) and last (<CODE>-1</CODE>) image, making the image
indexes <CODE>-2</CODE> to <CODE>1</CODE>. </P>

If your version of IM is older than v6.6.8-7, you can still generate duplicate
images, <A HREF="#clone" >Clone Image Operator</A>, but only one set of images
at a time.  </P>

Or by using a technique that basically mis-uses the <A
HREF="../anim_mods/#morph" >Color Morph Operator</A>, generate multiple
duplicate images.  The trick is to first make one clone to generate two
identical images, then use "<CODE><A HREF="../option_link.cgi?morph"
>-morph</A></CODE>" to generate in the last N-2 images between them.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_7.gif \( +clone \) -morph 3  +append seq_dup_morph.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_dup_morph.gif"
     ><IMG SRC="seq_dup_morph.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Note however that by mis-using the <A HREF="../anim_mods/#morph" >Color Morph
Operator</A> the images are actually being processed, as such it takes time
for morph to actually process the images (producing no change).  Also the
images created will contain actual copies of the original data, and are not
simple, memory saving clones.  </P>

<BR>

<A NAME="seq_combine"></A>
<H3>Combining Image Sequence Operations</H3>

Using these operators, you can extract a copy of a specific image, modify it,
and return that image back where you got it from. </P>

For example, here I make a "<CODE><A HREF="../option_link.cgi?clone"
>-clone</A></CODE>" of the 2rd image (image index '1'), rotate the images
colors from blue to red, then replace the original image with the modified one
by first "<CODE><A HREF="../option_link.cgi?delete" >-delete</A></CODE>" it
and "<CODE><A HREF="../option_link.cgi?insert" >-insert</A></CODE>" the new
one.  </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif  \( -clone 1  -modulate 100,100,166 \) \
          -delete 1  -insert 1    +append seq_update_1.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_update_1.gif"
     ><IMG SRC="seq_update_1.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Another way that seems to have become more common is use "<CODE><A
HREF="../option_link.cgi?swap" >-swap</A></CODE>" to replace the original
image, then "<CODE><A HREF="../option_link.cgi?delete" >+delete</A></CODE>"
the old image that is now on the end. This only requires you to give the
image position twice, instead of three times. Once to clone, and once to
replace the modified image.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick font_[0-3].gif  \( -clone 2  -modulate 100,100,166 \) \
          -swap 2  +delete     +append seq_update_2.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_update_2.gif"
     ><IMG SRC="seq_update_2.gif"
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

These techniques are continued below in the next section on <A HREF="#complex"
>Complex Image Processing and Debugging</A>. </P>

<BR>

<HR><!-- ---------------------------------------------------------------- -->

<A NAME="complex"></A>
<H2>Complex Image Processing and Debugging</H2>

Thanks to the addition of <A HREF="#image_seq" >Image Sequence Operators</A>
(see above), you no longer need to process images one step at a time, saving
the image and re-reading it again each time.  Instead you can now simply hold
the intermediate image in memory and continue processing it.  This saves a lot
of time, both in the converting of images to a file format, and in the actual
IO to save the image to slow disk. </P>

This type of image processing commands can become very long and complex.  As
such it is better to write the command in scripts, and try to place each major
operation on a line by itself for easier programming and editing.  See <A
HREF="../api/#scripts" >Hints for Better ImageMagick Shell/PHP Scripts</A>. </P>


<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR VALIGN=bottom><TD width="100%" ALIGN=justify>

For example, here I go though a whole complex processing sequence to generate
a red button on a black background.

<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -size 30x30 xc:black -fill white  -draw 'circle 15,15 5,15' \
          \( +clone -shade 110x90 -normalize -negate -alpha Off \) \
          \( +clone -clone -2 -compose Plus -composite \) \
          \( -clone 0 -shade 110x50 -normalize -alpha Off \) \
          \( +clone -gamma 1,0,0 \) \
          \( -clone 2,-1  -compose Multiply -composite \) \
          -append  seq_process_fx.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_process_fx.gif"
     ><IMG SRC="seq_process_fx.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Each line of the magick command generates a new image, except the last line
where I just <A HREF="../layers/#append" >Appended</A> all the working images
together to output the results of all the processing steps, rather than just
the final image. </P>

This technique lets you follow what each step (wrapped in parenthesis) the
very complex command produced, and allows for easier debugging of each step in
of a process. </P>

Note how it only uses the initial image's size and shape to generate the
initial shape of the button, so you are free to use any shape or image you
like!  The rest of the command will process it just like before.  </P>

Of course you would normally <A HREF="#delete" >Delete</A> all the temporary
working images.  That is I would replace the last line in the above with
something like this...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE NO_EXECUTE>
          -delete 0--2  seq_process_result.gif
</samp></pre></TD></TR></TABLE>
</DIV></P>

Other ways of checking the results is to pipe the result into the display
command, so as to view the results on screen, instead of save it to an image
file.  That is, use something like this for the last line...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE NO_EXECUTE>
          +append  miff:- | display -
</samp></pre></TD></TR></TABLE>
</DIV></P>

Alternatively instead of "<CODE><A HREF="#display" >display</A></CODE>" you
can use '<CODE>show:</CODE>' which will display the resulting image on screen,
and then allow the original command to continue or exit.  See <A
HREF="../files/#show" >Show, Display Image Output</A> for more information.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE NO_EXECUTE>
          +append  show:
</samp></pre></TD></TR></TABLE>
</DIV></P>

You actually don't even need the "<CODE><A HREF="../option_link.cgi?append"
>+append</A></CODE>", in which case IM will show each image in sequence, by
pressing 'spacebar'. </P>

You can even get fancier by using "<CODE><A HREF="#montage"
>montage</A></CODE>" command to view the results in a nicer way...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE NO_EXECUTE>
          miff:- | montage - -bordercolor blue -border 1 -geometry +2+2 show:
</samp></pre></TD></TR></TABLE>
</DIV></P>

This type of image processing also allows for easy viewing of intermediate
images, immediately the image has been created.  Basically you can insert
lines this in between "<CODE>\( ...  \)</CODE>" statements.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE NO_EXECUTE>
          \( +clone -write show: +delete \)\
</samp></pre></TD></TR></TABLE>
</DIV></P>

IM will automatically continue processing once that intermediate image has
been output for display purposes. See <A HREF="../files/#show" >Show, Display
Image Output</A>. </P>

Alternatively, by inserting this line instead, you can display all the
current images generated so far at that point in the processing...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE NO_EXECUTE>
          \( -clone 0--1 -append -write show: +delete \)\
</samp></pre></TD></TR></TABLE>
</DIV></P>

After you have the image processing steps debugged and settled then you can
optimize the code, so that you don't use as many parenthesis steps, as well as
fewer <A HREF="#clone" >Cloned Images</A>, and resulting in less intermediate
images to <A HREF="#delete" >Delete</A> at the end. </P>

Remember also that "<A HREF="../compose/#compose" >Image
Composition</A></CODE>", and or "<A HREF="../layers/#flatten" >Layer
Flattening</A></CODE>" merges multiple images together, to leave just the one
resulting image, which can reduce the overall number of intermediate images in
memory.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -font Ravie -pointsize 48 -background black -fill white \
          label:'IM' -bordercolor black -border 5  seq_label.gif

  magick seq_label.gif -alpha Off \
          \( +clone  -shade 110x90 -normalize -negate \
             +clone  -compose Plus -composite \) \
          \( -clone 0 -shade 110x50 -normalize -gamma 1,0,0 -alpha Set \) \
          -delete 0 +swap  -compose Multiply -composite  seq_button.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="seq_label.gif"
     ><IMG SRC="seq_label.gif"
           ALIGN=middle VSPACE=10 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="seq_button.gif"
     ><IMG SRC="seq_button.gif"
           ALIGN=middle VSPACE=10 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

The ability of ImageMagick, to process any image, in a standard, programmed,
and automated way, using multiple steps all in the one command is what makes
IM such a powerful tool.  You can script up a very complex operation, then
apply it to many images.  Image list operators, and parenthesis just made
IM an order of magnitude more powerful, allowing you to write more complex
image manipulation programs, with fewer commands.  </P>

For another example of scripting a complex images process together see the
example <A HREF="../advanced/#3d-bullets" >Scripted 3-D bullets from
Shapes</A>. </P>

Also see <A HREF="../api/#scripts" >Hints for Better ImageMagick Shell/PHP
Scripts</A>, on ways of improving your image process scripting, both for
easier editing, understanding, and for others to be able to follow what you
have done. </P>



<HR><!-- ---------------------------------------------------------------- -->

<A NAME="settings"></A>
<H2>Image Meta-data: Attributes, Properties and Artifacts</H2>

So far we have look at images and the actual content or data that makes up the
image.  But images are more than just 'image data'.  There are many attributes
or meta-data that is also part of an image, and affect its image processing
and how other programs should handle the image.
</P>

For example an image could have an 'offset' or be part of a larger 'virtual
canvas' (page).  That is a single image may only be a small part larger
picture, made up of a series of other images, to form 'layers' or and
'animation'. </P>

IM also attaches has a lot of special 'settings' that is used by many image
processing operators to modify how they work.  For example, the 'background
color' to use.  Some of these are global setting, which are the same across
a whole list of images, while others may be different for each image
within the list. </P>

So what sort of things are also part of an images?  Lots of things... </P>

<UL>
<LI>Image meta-data that are typically (though not always) saved with the
    image in image file formats.  For example: profiles, labels, captions, and
    comments, and virtual canvas information (page). These are all per-image
    settings, and can be different for each image in the current image list.
    </P>

<LI>Global settings used by many different image processing operators, but
    generally not save with the image:  Colors such as background, bordercolor,
    fill, and mattecolor, also font, and pointsize, gravity, compose method,
    color channel handling, read/write bit depth of color values. </P>

<LI>Expert settings and defines, used to control the deeper lower level
    operation of specific image processing operators.  For example: distortion
    viewport,  special compose method arguments, </P>

<LI>How the image is actually to be stored in memory within ImageMagick:
    for example as RGB or CMYK.  Whether an alpha channel is present, and
    enabled or not, also the palette an image might have had when read in.
    However some of these storage settings are hard coded at compile time
    (such as in memory color value Quality). </P>

<LI>Some general IM operational settings, such as debugging or verbose
    settings, typically controlling information output or error handling. </P>

</UL></P>

That is a lot of information that can be saved, and/or affect how images are
processed.  And while they can fall into a number of groups, how well
ImageMagick handles each of these things and if they are global, or image
specific, depends a lot on the specific thing involved. </P>

Yes I am being vague, because until you get to specifics it is very hard not
to be. It can also be very confusing. </P>

All these values are stored with the in memory images in three different
ways...

<DL>
<DT><B>Attributes</B>
<DD>These are stored as special data structure items for each image,
    generally so as to allow fast and direct access by the various image
    processing operators.

    For example: image size, virtual canvas geometry, background, fill,
    stroke, matte colors, pointsize, density, font, compose, interpolate,
    virtual-pixel method, profile blocks, time delay and disposal
    settings; and many more things. </P>

    Note that some of these are 'specific' to each image, while others are
    treated as a 'global' setting that is set to the same value across all
    images by the CLI interface, even though they are still stored as part of
    each individual image. </P>

    Attributes are typically modified using the many options, as part of the
    normal image processing, or more generally using <A HREF="#set" >Set</A>.
    </P>


<DT><B>Properties</B>
<DD>These are a freeform set of key-value strings that are attached to each
    image on an individual basis.  Each image can have a completely different
    set of strings.  Essentially they are meta-data items that do not need to
    be accessed or decoded regularly, or are used in some special way. </P>

    Typical examples of this are: label, caption, and comment strings;
    creation and modified dates; user defined strings; results from some
    operators. </P>

    Users can use <A HREF="#set" >Set</A> to set or change these, as long as
    the 'key' does not correspond to some known 'attribute'.  </P>

<DT><B>Artifacts</B>
<DD>This is a global set of freeform strings that is common across all
    images. </P>

    It is used to hold freeform global settings that define or modify the
    reading and image processing of all the images. An example of which
    is the "<CODE>verbose</CODE>" setting that causes some operations to
    output general information about there actions, including more verbose
    identify output. </P>

    Users can modify these global values using <A HREF="#define" >Define</A>
    (see below), or with a special case of the <A HREF="#set" >Set</A>, (see
    <A HREF="#set_option" >Using Set "Option:" to Define and Artifact</A>).
    </P>

</DL></P>

Understanding these three storage methods is the key to knowing how settings
and meta-data handling works within ImageMagick. And allow you to do some very
advanced and normally difficult to achieve image processing techniques. </P>


<A name="attributes"></A>
<A name="properities"></A>
<H3>Setting/Changing Image Attributes/Properities</H3>

Simple Meta-data are image attributes that are often have the greatest
importance to image processing.  So important they are decoded and made
available in the image data structure to allow fast use by image processing
operators. </P>

Such data is generally modified in two ways.  A direct changing of the image
meta-data as an image is read or created.  Or as a modification of meta-data
to an image that is already in memory. </P>

<B>For example,</B> "<CODE>-label 'string'</CODE>"  will set the comment in
every image that is read in or created <I>after</I> that setting has been set.
However "<CODE>-set label 'string'</CODE>" will change the 'label' meta-data
of all images the current image list, already in memory. </P>

The reason for the two methods is due to historical backward compatibility and
convenience.  Basically "<CODE>-label</CODE>" has traditionally been set
BEFORE the image it is applied to has been read in.  It only affects the
images that are read in (or created) <I>after</I> it has been set, or changed.
</P>

For example....
<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE>
  magick -label one  image_one.png \
          -label two  image_two.png     output_image_list
</samp></pre></TD></TR></TABLE>
</DIV></P>

On the other hand "<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>"
operator changes ALL the images that are in the current image list, including
the ones previously read in.  Thus you must generally use parenthesis to limit
what image you are applying the option to, unless you want to apply it to ALL
the images read in so far.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE>
  magick \( image_one.png -set label one \) \
          \( image_two.png -set label two \)  output_image_list
</samp></pre></TD></TR></TABLE>
</DIV></P>

You can un-define the setting using "<CODE>+label</CODE>", in which case the
label meta-data will be left alone as the image is read in or created.  If the
image read in also doesn't have a label, IM will fall back to some logical
default.  For label that is just the empty string. </P>

You can see more detailed and specific examples of both methods  <A
HREF="../montage/#label" >Montage Labeling of Images</A> which make heavy use
of this for labeling purposes. </P>

This 'duality' of setting image meta-data, also exists for other options. This
includes...  "<CODE><A HREF="../option_link.cgi?comment"
>-comment</A></CODE>", "<CODE><A HREF="../option_link.cgi?comment"
>-caption</A></CODE>", "<CODE><A HREF="../option_link.cgi?page"
>-page</A></CODE>", "<CODE><A HREF="../option_link.cgi?dispose"
>-dispose</A></CODE>", and "<CODE><A HREF="../option_link.cgi?delay"
>-delay</A></CODE>". </P>

The virtual canvas size and image offset setting (page) however also has
a third method, using a special operator "<CODE><A
HREF="../option_link.cgi?repage" >-repage</A></CODE>"  (see <A
HREF="#virtual_canvas"
>Virtual Canvas</A> below). </P>

<BR>
For example here I use all the setting methods available to set the 'virtual
canvas offset' or 'page' of the individual images, as I create a <A <A
HREF="../anim_basics" >Animation</A> from them...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -delay 100 -dispose Background \
            -page 100x100+5+10  eye.gif  \
            -page +35+30        news.gif  \
            \( storm.gif  -set page +62+50 \) \
            \( tree.gif   -repage   +10+55 \) \
          -loop 0  animation_page.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="animation_page.gif"
     ><IMG SRC="animation_page.gif"          WIDTH=100 HEIGHT=100
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

As you can see the traditional (non-set) method is simpler when creating
multi-image list from separate image files.  But "<CODE><A
HREF="../option_link.cgi?set" >-set</A></CODE>" or the specialized "<CODE><A
HREF="../option_link.cgi?repage" >-repage</A></CODE>" operators are better
when you need to change an image that has already been read into memory, or was
created by come complex image processing methods. </P>

For example to change the image offset of the third image (image index
'<CODE>2</CODE>', or the 'tree') in the last example...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick animation_page.gif \
          \( -clone 2 -set page +55+10 \) -swap 2  +delete \
          animation_mod.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="animation_mod.gif"
     ><IMG SRC="animation_mod.gif"          WIDTH=100 HEIGHT=100
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

For a more extreme example of extracting and modifying individual images in a
image list see <A HREF="../anim_mods/#frame_mod" >Frame by Frame
Modification of an Animation</A>. </P>

Here is another example using "<CODE><A HREF="../option_link.cgi?set"
>-set</A></CODE>" to specify a comment on all the images, and then modify one
specific image.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE OUT=comments.txt>
  magick xc: -duplicate 9 \
              -set comment 'T minus %[fx:n-t]' \
              \( -clone 7 -set comment 'We have ignition!' \) -swap 7 +delete \
              -format "image #%p : %c" info:
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="comments.txt"
     ><IMG SRC="comments.txt.gif"
           ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

<BR>

You can use "<CODE><A HREF="../files/#mpr" >mpr:</A></CODE>", as an
alternative way of setting attributes to in memory images.

For example here we take an image with a 'Bad' comment, that is in memory,
and replace the comment with a 'Good' one...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE OUT=comment_change.txt>
  magick -comment 'Bad Comment' rose: \
          \
          -write mpr:rose +delete \
          -comment Good   mpr:rose  rose.jpg

<n>  magick identify -format "image comment = %c" rose.jpg
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="comment_change.txt"
     ><IMG SRC="comment_change.txt.gif"
           ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

This works, but is extremely awkward and painful to use, especially when
dealing with multiple images such as an animation.  In fact this is the only
way to change meta-data in images in IM version 5.  (Yuck!) </P>

<BR>

<H3>General Global Attributes</H3>

<DIV ALIGN=center><FONT SIZE=+2><B>
<IMG SRC="../img_www/const_barrier.gif" WIDTH=39 HEIGHT=35 ALIGN=top>
Under Construction
<IMG SRC="../img_www/const_hole.gif" WIDTH=144 HEIGHT=50 ALIGN=middle>
</B></FONT></DIV></P>

<PRE>
Most of these attributes are generally set globally either before or after
reading images into memory (it makes no difference).  They are typically used
as a general control of the later image processing operations.

 * Many settings are simpley globally saved for use as needed
     -fill  -background  -bordercolor  -strokecolor  -mattecolor  -quantize
     +dither  -channels  -size  -gravity  -units  -density  -font  -pointsize
     -tile

 * Some settings affect the way an image is saved to disk, or the meta-data
   saved with the image.  This includes
     -loop  -compression  -quality  -depth
     -density  -background

 * -compose is awkward, as it can only be set globally. But if unset
   then individual images can have a different setting (for layering).

   Most of these however can be turned off, (using a + version) which
   causes the operator to retrieve the setting from image meta-data
   (eg: +background falls back to the original images meta-data if present)
   but more generally it falls back to some default value. (eg:
   +gravity falls back to 'None' to mean no gravity has been set).

   A few of these also get saved with images when written. Specifically
   the GIF format will save an the -background and -bordercolor as part of the
   images attributes, however these are normally ignored by programs which
   read these images.

You may have noticed that some settings are used in multiple places.
for example  -density

  * used in reading in many vector format images like
    Postscript, PDF, and WMF image formats.
  * also in special image generators such as label: caption: and text:
  * used as part of font drawing in -annotate -draw and -polaroid  operators.
  * And finally some formats save the density or resolution as part
    of the the image file format. For example postscript wrapped raster
    images, JPEG, and TIFF.

Is it any wonder then why settings can be so confusing.
</PRE>


<A NAME="virtual_canvas"></A>
<A NAME="page"></A>
<A NAME="repage"></A>
<H3>Virtual Canvas, and the Page and Repage Operators</H3>

The 'page' or 'virtual canvas' settings primary purpose within IM is to define
how a the 'real' part of an image, (the part that actually contains color
pixel data), fits in a larger context of a 'canvas'.  This is especially
important when multiple images are involved and need to be positioned relative
to each other for <A HREF="../layers/" >Layers of Multiple Images</A> and in
<A HREF="../anim_basics/#gif_anim" >GIF Animations</A>. </P>

It is also used, (and hence its name of the term 'page') to define where an
image fits on a larger physical piece of paper or 'page', in <A
HREF="../text/#postscript" >Postscript</A> or in generating image of a 'page'
of <A HREF="../text/#text" >Text</A>. </P>

While it is most often used for <A HREF="../layers/" >Layers of Multiple
Images</A> and in <A HREF="../anim_basics/#gif_anim" >GIF Animations</A>, it
is also involved with remembering the original positions of images when <A
HREF="../crop/#crop" >Cropping</A>, and <A HREF="../crop/#trim" >Trimming</A>
Images, as well in <A HREF="../anim_mods/#composite" >Multi-Image List
Composition</A>, and in <A HREF="../distorts/#distort" >General Image
Distortions</A>. </P>

Now the 'page' defines two separate parts: a 'virtual canvas' or area, defining
a larger space in which the image exists, and the 'offset' or location within
that 'canvas' where the actual image is positioned. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  While negative 'offsets' are allowed, the 'canvas size' is limited to an area
  from 0,0 to the given width and height. That is only a positive canvas can
  be specified.
</I></FONT></TD></TR></TABLE></P>

These two aspects, 'size' and 'offset' are closely related, but usually you
want to handle these aspects separately, or in a more controlled fashion.  So
in addition to the normal "<CODE><A HREF="../option_link.cgi?page"
>-page</A></CODE>" and "<CODE><A HREF="../option_link.cgi?page" >-set</A>
page</CODE>"  methods, a separate option   "<CODE><A
HREF="../option_link.cgi?repage" >-repage</A></CODE>" has also been provided
to allow a finer control. </P>

Specifically... <DL>

<DT><B>+repage</B>
<DD>Without and arguments, will reset the image virtual canvas to the actual
    image itself.  That is just clear any virtual canvas information that the
    image may have. </P>

    This often important after applying the image sub-diving operators such as
    <A HREF="../crop/#crop" >Cropping</A>, and <A HREF="../crop/#trim"
    >Trimming</A>. </P>

    It is especially important in removing virtual canvas size and
    offsets before saving to the GIF or PNG image file formats, as many
    browsers use the canvas/offset information as part of the image display.
    </P>

<DT><B>-repage WxH</B>
<DD>Change the existing images virtual canvas size, but do not reset the image
    position on that canvas. </P>

    Note supplying this argument to either "<CODE><A
    HREF="../option_link.cgi?page" >-page</A></CODE>" or "<CODE><A
    HREF="../option_link.cgi?set" >-set</A> page</CODE>" will reset the
    images location to '<CODE>+0+0</CODE>' which is probably not wanted.. </P>

<DT><B>-repage +X+Y</B>
<DD>Just move the image on the virtual canvas to this absolute location
    without changing the images canvas size. </P>

<DT><B>-repage +X+Y\!</B>
<DD>Do a relative move of the image on the virtual canvas by adding the given
    numbers (positive or negative) to the images existing offset position.
    </P>

<DT><B>-repage 0x0</B>
<DD>Attempt to find the best virtual canvas size that contains the whole
    image. </P>

    This however will fail for images with a negative offset as there is no
    way to specify a virtual canvas with negative components. To avoid
    problems it will use the size of the actual image as the smallest canvas
    size possible.  That is it will never assign a virtual canvas with a zero
    dimensions. </P>

<DT><B>-repage 0x0+X+Y</B>
<DD>Move the images offset, then resize the virtual canvas to best fit the
    images new location. </P>

<DT><B>-repage 0x0+0+0</B>
<DD>Equivalent to a "<CODE><A HREF="../option_link.cgi?repage"
    >+repage</A></CODE>" or "<CODE><A HREF="../option_link.cgi?set" >+set</A>
    page</CODE>" or a "<CODE><A HREF="../option_link.cgi?set" >-set</A> page
    0x0</CODE>".  All virtual canvas and offset information is removed. </P>

<DT><B>-repage WxH+X+Y</B>
<DD>Equivalent to a "<CODE><A HREF="../option_link.cgi?set" >-set</A> page
    WxH+X+Y</CODE>".  That is just assign the given values directly. </P>

</DL></P>

Note the use of a '<CODE>!</CODE>' flag will make the given offset a relative
displacement to the images current offset.  That is a '<CODE>-repage
+5+0\!</CODE>" will move the images offset 5 pixels to the right, without
modifying the virtual canvas size. </P>

It is currently not posible to directly specify a relative resize of the
virtual canvas size. However it can be done by using <A
HREF="../transform/#fx_escapes">FX Percent Escapes</A>. But this is not
commonly needed. One example is given in <A HREF="../crop/#trim_color"
>Trimming with a Specific Color</A>. </P>

Caution is required in giving an image a final negative offset position as the
GIF file format can not handle this, and resets it to zero if negative.  Also
some browsers go crazy when given PNG images with negative offsets. </P>

What virtual canvas information is saved with an image is format dependent.
<TABLE WIDTH=90% ALIGN=center>
<TR valign="top"><TD><B>JPEG</B>&nbsp;&nbsp;<TD>
    Like many image file formats, JPEG images do not save virtual canvas
    information at all.  The information is just ignored and lost.

<TR valign="top"><TD><B>GIF</B><TD>
    The size of the virtual canvas and offsets will be saved as part of its
    GIF animation handling.  However it will not handle negative offsets.  Any
    negative offset will be reset to zero on save.

<TR valign="top"><TD><B>PNG</B><TD>
    Offsets and even negative offsets is saved, but the PNG file format does
    not normally save the virtual canvas information.  However PNG images
    saved by IM will include the virtual canvas size information, but is only
    used by other IM commands. </P>

    If IM does read a PNG image without this IM specific attribute, it will
    set the image virtual canvas to an appropriate size to ensure the image is
    visible on the virtual canvas (as per a "<CODE>-repage 0x0</CODE>").  For
    images without an offset that means the virtual canvas is the same size as
    the actual image.

</TABLE></P>

Some formats like GIF and PNG save virtual canvas information, others like
JPEG do not.  All of the above formats have there own limitations for virtual
canvas information.  Only the internal MIFF file format does not have any such
limitations. </P>

Note that "<CODE><A HREF="../option_link.cgi?page" >-page</A></CODE>" has
special meaning for "<CODE>text:</CODE>" and "<CODE>ps:</CODE>" image
generator operators (See <A HREF="../text/#text" >Text: Multi-line Text
Files</A> and <A HREF="../text/#postscript" >PS: Postscript formatted Text and
Graphics</A>). As such its normal canvas size and offset meaning are not used
during the creation of these images. </P>



<A NAME="set"></A>
<A NAME="property"></A>
<A NAME="properties"></A>
<H3>Set and Per-Image Properties</H3>

However IM can not make an option for handling every possible setting that an
image can have.  That would be just impossible.  Not only that users often
like to add or define their own settings. </P>

Because of this the "<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>"
option can actually define ANY setting with ANY value. </P>

If the setting is not a specifically known attribute of an image (to be saved
in a way to allow fast acceess by operators), it is saved into the image as
a '<B>Property</B>' (an array of strings), and will be listed near the bottom
of a verbose "<CODE>identify</CODE>" output, or retrieved and expanded using
<A HREF="http://imagemagick.org/script/escape.php" >Percent Escapes</A>. </P>

The built in rose image for example automatically generates three
'properties': two date strings, and a 'signature hash'.  To this I have also
added my own user defined 'property' setting.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE REPLACE OUT=properties.txt>
  magick rose:  -set my_property my_value   -verbose info: |\
    sed -n '/Artifacts/q; /Properties/,$ p'
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="properties.txt"
     ><IMG SRC="properties.txt.gif"
           ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

Some image processing operators even return values of special interest as
image 'properties'.  They are not needed by other operators, so are not stored
as a 'attribute', but are saves as a 'property' string for posible use by the
user.  For example the final pointsize selected by a <A
HREF="../text/#label_bestfit" >Best Fit Label</A>, will be saved as a special
image property.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%">
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE REPLACE OUT=property_label.txt>
  magick -size 100x label:Anthony  -verbose -identify  property_label.gif |\
    sed -n '/Artifacts/q; /Properties/,$ p'
</samp></pre></TD></TR></TABLE></TD><TD ALIGN=center>
  <A HREF="property_label.gif"
     ><IMG SRC="property_label.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR><TR><TD>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="property_label.txt"
    ><IMG SRC="property_label.txt.gif"
          ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</TD><TD></TD></TR></TABLE></P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Note that the <A HREF="../text/#label" >label:</A> generator itself also
  sets a 'label' attribute, which happens to be saved as a property string.
</I></FONT></TD></TR></TABLE></P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/expert.gif"   WIDTH=23 HEIGHT=26
    ><IMG SRC="../img_www/space.gif"   WIDTH=17 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  All 'properties' are saved as a free form string data type, and stored as
  image meta-data.  </P>

  Because of this, not all 'attributes' are saved as 'properties', as many
  attributes need to be saved and used directly as numerical data by image
  processing operators.  An example of this is the virtual canvas 'page'
  attribute.

</I></FONT></TD></TR></TABLE></P>

Here I use an identify "<CODE><A HREF="../option_link.cgi?format"
>-format</A></CODE>" setting to get IM to output the pointsize of the label it
created and discarded.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE OUT=property_pointsize.txt>
  magick -size 100x label:Anthony \
          -format 'pointsize = %[label:pointsize]pts' info:
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="property_pointsize.txt"
     ><IMG SRC="property_pointsize.txt.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Using this information to generate a new label image is trick and will be
looked at below. </P>

One of the most useful user defined settings you can use is the
"<CODE>filename:</CODE>" setting.  For example...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick rose: -set filename:my_area '%wx%h' 'rose-%[filename:my_area].png'
</samp></pre></TD></TR></TABLE>
</DIV></P>

The above will generate an image named "<CODE>rose-70x46.png</CODE>". </P>

Only user defined settings prefixed with the "<CODE>filename:</CODE>" string
can be used inside the output filename, as a security measure, though any name
can be used.  For more examples of this see <A HREF="../files/#save_escapes"
>Filename Percent Escapes</A>. </P>


<A NAME="define"></A>
<A NAME="artifact"></A>
<A NAME="artifacts"></A>
<H3>Define and Global Artifacts</H3>

Defined values are known as '<B>Artifacts</B>' and are defined globally across
all images, and are set using the special "<CODE><A
HREF="../option_link.cgi?define" >-define</A></CODE>" operator. </P>

The primary purpose of such '<B>Artifacts</B>' are as special settings that
can be used as extra (or out of band) settings by <I>Image File Format
Coders</I>, or <I>Image Processing Operators</I>.  Basically it allows the
addition of free-form settings for specific requirements without needing to
create another 'attribute'. </P>

Also being globally set, they are not attached to specific images, but to all
images in an Image Sequence, and are available when no images have been
read in or created yet. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Note that API's can have multiple image list, with different sets of
  'artifacts' attached, but the command line interface (CLI), only has one
  active image list, as such 'artifacts' really are global.

</I></FONT></TD></TR></TABLE></P>

In other words 'defined artifacts' provide a way for expert users to modify
the normal or standard operation of specific operators, beyond normal argument
usage.

For example, <A HREF="../formats/#jpg_read" >JPEG Coder Settings</A>, for both
Reading and Writing such images...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  -define jpeg:size=300x200
  -define jpeg:preserve-settings=1
  -define jpeg:optimize-coding=true
</samp></pre></TD></TR></TABLE>
</DIV></P>

<A HREF="../distorts/#distort_options" >Image Distortion Options</A>,
such as...

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  -define distort:scale=2
  -define distort:viewport=44x44+15+0
</samp></pre></TD></TR></TABLE>
</DIV></P>

<A HREF="../filter/#options" >Resize Filter Controls</A>, such as
<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  -define filter:blur=0.75
  -define filter:support=1.25
</samp></pre></TD></TR></TABLE>
</DIV></P>

Some artifact defines have shortcuts because they are used very regularly by
users. </P>

For example the "<CODE><A HREF="../option_link.cgi?verbose"
>-verbose</A></CODE>" operational control (see below), is really equivalent to
using "<CODE>-define verbose</CODE>", and thus creating
a '<CODE>verbose</CODE>' artifact. For example...</P>

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE OUT=artifact_verbose.txt>
  magick xc: -verbose info: |\
    sed -n '/Tainted:/q; /Artifacts:/,$ p'
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="artifact_verbose.txt"
     ><IMG SRC="artifact_verbose.txt.gif"
           ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

It follows then the plus form "<CODE><A HREF="../option_link.cgi?verbose"
>+verbose</A></CODE>" just removes the '<CODE>verbose</CODE>' artifact,
and is thus equivalent to "<CODE>+define verbose</CODE>". </P>

<A NAME="define_set"></A>
<H4>Artifacts and Delayed Percent Escapes</H4>

Artifacts are also often used to hold special attributes that should be
assigned to images that are read in, after the define has been given. </P>

The "<CODE><A HREF="../option_link.cgi?label" >-label</A></CODE>" setting also
just sets an artifact with the argument provided by the user.  This artifact is
then converted into a '<CODE>label</CODE>' <A HREF="#set" >Setting or
Propriety</A> after a new image has been read in or created. </P>

For example creating a "<CODE>rose:</CODE>" image with a label set
<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE NOIMAGE REPLACE OUT=rose_properties.txt>
  magick -label "%wx%h"  rose: -verbose info:  |\
      sed -n '/Tainted:/q; /Properties:/,$ p'
</samp></pre></TD></TR></TABLE>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD>
  <A HREF="rose_properties.txt"
     ><IMG SRC="rose_properties.txt.gif"
           ALIGN=middle VSPACE=0 HSPACE=0 BORDER=0 ALT="[IM Text]"></A>
</TD></TR></TABLE>
</DIV></P>

That is "<CODE><A HREF="../option_link.cgi?label" >-label</A></CODE>" first
defined the '<CODE>label</CODE>' artifact shown.  Later when the rose image
was created (and its size attributes was known), IM converted that global
artifact into an image specific 'property' and only then expanding any
<A HREF="http://imagemagick.org/script/escape.php" >Percent Escapes</A> at
that time. This is known as a <A HREF="arg_delayed" >Delayed Percent
Escapes</A>. </P>

The same thing happens with a few other setting options, such as "<CODE><A
HREF="../option_link.cgi?comment" >-comment</A></CODE>" and "<CODE><A
HREF="../option_link.cgi?caption" >-caption</A></CODE>" as well. </P>

It is because of <A HREF="arg_delayed" >Delayed Percent Escapes</A> that
"<CODE><A HREF="../option_link.cgi?define" >-define</A></CODE>" will only save
the strings, while the  "<CODE><A HREF="../option_link.cgi?set"
>-set</A></CODE>" operator will do the expansion. </P>


<A NAME="set_option"></A>
<H4>Using Set "option:" to Define an Artifact</H4>

We showed above how you can "<CODE><A HREF="../option_link.cgi?set"
>-set</A></CODE>" special purpose personal <A HREF="#properties"
>Proprieties</A>, on a per-image bases.  For example...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -size 80x40 xc:  -set myinfo 'I love IM!' \
          -gravity center -annotate 0x0 '%[myinfo]' \
          property_annotate.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="property_annotate.gif"
     ><IMG SRC="property_annotate.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

But as <A HREF="#properties" >Proprieties</A> are attached to specific
images, you can't use them in the creation of new images.  For example this
will fail...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick rose: -set myinfo 'I love IM!'  label:'== %[myinfo] ==' \
          -gravity center  -append   property_append_fail.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="property_append_fail.gif"
     ><IMG SRC="property_append_fail.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

As you can see the '<CODE>myinfo</CODE>' property was for found or included
in the appended label. </P>

On the other hand globally defined <A HREF="#artifacts" >Artifacts</A> are
available to the image generators.  They have to be so that the image
generators or image file coders can read them for various control settings.
As such as using a "<CODE><A HREF="../option_link.cgi?define"
>-define</A></CODE>" will work as expected.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick rose: -define myinfo='I love IM!'  label:'== %[myinfo] ==' \
          -gravity center  -append   artifact_append.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="artifact_append.gif"
     ><IMG SRC="artifact_append.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

So how can use you create a label using an image property or attribute?  The
"<CODE><A HREF="../option_link.cgi?define" >-define</A></CODE>" option does
not currently allow the use of image properities!  </P>

The trick is to use a special prefix "<CODE>option:</CODE>" when using the
"<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>" option. This
addition causes "<CODE><A HREF="../option_link.cgi?set" >-set</A></CODE>" to
define a 'artifact' with the name that follows the prefix.

For example, this is equivelent to the last example.
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick rose: -set option:myinfo 'I love IM!'  label:'== %[myinfo] ==' \
          -gravity center  -append   property_option_append.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="propertyoption_append.gif"
     ><IMG SRC="property_option_append.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

More importantally the "<CODE><A HREF="../option_link.cgi?set"
>-set</A></CODE>" option will expand <A
HREF="http://imagemagick.org/script/escape.php" >Percent Escapes</A>.  Which
means if we have some per-image <A HREF="#properties" >Propriety</A>, we can
magick it to a global <A HREF="#artifacts" >Artifact</A>.

For example, here I create a label, then magick the
'<CODE>label:pointsize</CODE>' property the "<CODE>label:</CODE>" image
generator created, into a global artifact '<CODE>my_pointsize</CODE>'.  As an
artifact, this information is available when I create a second label image.
I then append the two labels together (with a separating '<CODE>gray</CODE>'
line).  <I>A very tricky example</I>.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  magick -size 100x -gravity center label:Anthony \
          -set option:my_pointsize '%[label:pointsize]' \
          -set option:my_height '%h' \
          -size 100x1 xc:gray \
          -size 100x label:'at %[my_pointsize]pt and %[my_height]px high' \
          -append  property_append.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="property_append.gif"
     ><IMG SRC="property_append.gif"
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</TD></TR></TABLE></P>

Note the placement of the "<CODE>-set option:...</CODE>" in the above.  If you
were to place it AFTER the creation of the "<CODE>xc:gray</CODE>" it would be
that image that would be used to set the global artifact.  That is because
only the properties of the last image define the value stored in the global
artifact. </P>

The reason is that only the last image is used to define the artifact. </p>

Actually what realy happens is that "<CODE><A HREF="../option_link.cgi?set"
>-set</A></CODE>" is applied to every image in the current image list, even
though it is generating a globel artifact.  As such each image will assign its
own properties into the global artifact, replacing the previously assigned
values.  When finished, only the last image will have 'defined' the artifact.
</P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/warning.gif"  WIDTH=28 HEIGHT=28
    ><IMG SRC="../img_www/space.gif"   WIDTH=12 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  At this time the 'FX escape' has no way of reading properties or artifacts.
  And as such you current can not do arithmetic on such values.
</I></FONT></TD></TR></TABLE></P>


<A NAME="type"></A>
<H3>Image Type when Reading and Writing</H3>

The "<CODE><A HREF="../option_link.cgi?type" >-type</A></CODE>"
operator/setting defines the style or color space to use when an image is
being read in or written out, to ensure the resulting image (in memory, or in
the image file) is what you expect it to be.  As part of this, it may do some
<A HREF="../color_basics/#colorspace" >Color Space</A> modifications at the
time of the file I/O, though only to ensure the image is in a form that was
expected.  </P>

For example "<CODE><A HREF="../option_link.cgi?type" >-type</A></CODE>" has a
special '<CODE>bilevel</CODE>' setting that can be used magick and save
images as a two color monochrome image for some image formats.  Similarly
'<CODE>TrueColor</CODE>' and '<CODE>TrueColorAlpha</CODE>' can be used force a
<A HREF="../formats/#tiff" >TIFF</A> image to be saved as a full color RGB
image even if the image is actually purely gray-scale. </P>

Other settings include '<CODE>GrayScale</CODE>' and
'<CODE>GrayScaleAlpha</CODE>' which will ensure the written image is
gray-scale only (without or with transparency, respectively). Or
'<CODE>Palette</CODE>' to force the use of an indexed color map in formats that
support this option. </P>

During reading of image file formats, a "<CODE><A
HREF="../option_link.cgi?type" >-type</A></CODE>" setting of
'<CODE>TrueColorAlpha</CODE>' will force a <A HREF="../formats/#jpeg"
>JPEG</A> image being read, to have a 'Alpha' channel added to its
in memory storage, even though the <A HREF="../formats/#jpeg" >JPEG</A> format
itself can not handle transparency. </P>

When writing to a <A HREF="../formats/#png_formats" >PNG</A> file format
setting a "<CODE><A HREF="../option_link.cgi?type" >-type</A></CODE>" of
'<CODE>Pallette</CODE>' will force it to use a color indexed
"<CODE>PNG8</CODE>' internal image format.  Simularly using
"<CODE>BiLevel</CODE>" will force IM to dither color images to black and white
for most image file formats. </P>

Unfortunately the exact meaning and capabilities of "<CODE><A
HREF="../option_link.cgi?type" >-type</A></CODE>" depend on the specific image
format you are reading or writing. See the various <A HREF="../formats/"
>Image File Formats</A> example areas. For specific PNG examples see <A
HREF="../formats/#png_formats" >PNG output formats</A>. </P>

<BR>
<HR><!-- ---------------------------------------------------------------- -->

<A NAME="image_quality"></A>
<H2>Controling the Quality of Images</H2>

<A NAME="depth"></A>
<H3>Depth - File Format Bit Depth</H3>

<B>Quality and Depth</B> are two terms are often talked about in Mailing Lists
and in these example pages, so I'd like to explain them a little.
<I>Quality</I> is a compile time setting in ImageMagick, and is used to
determine the size of the values use to store images in IM memory and during
processing.  Basically it means the <B>Quality of Processing</B> that
a specific IM was compiled for. </P>

The <I>Depth</I> is the size of the values used when an image is either read
or saved to/from an Image File Format.  It is as such more highly variable.
and controlled by the "<CODE><A HREF="../option_link.cgi?depth"
>-depth</A></CODE>" setting, or by the original 'depth' of the image that was
read in. More on this in a moment. </P>

Remember...
<DIV ALIGN=center><B>
       Quality is 'in memory' value size, and is compiled into IM.
<BR>      Depth is file format value size, and is variable.
</B></DIV></P>

Now most image formats are of depth 8.  That is they use 8 bits (or a value
from 0 to 2<SUP>8</SUP>-1) to hold each color value used in the image.  That
is a value of 0 to 255 for red,  0 to 255 for green, and 0 to 255 for the blue
channel. </P>

More usually this type of image is referred to as 24 bit images (that is "bits
per <I>pixel</I>", NOT "bits per <I>value</I>" as used by the "<CODE><A
HREF="../option_link.cgi?depth" >-depth</A></CODE>" setting). This includes
such formats as such as <A HREF="../formats/#jpg" >JPEG</A>). </P>

If the alpha channel is also involved than you get 4 x 8 bit values, or a 32
bit/pixel image. This is what a <A HREF="../formats/#png" >PNG</A> image will
typically use, though such images can also save using 16 bit per value too.
</P>

What a lot of people refer to as 8 bit images (8 bit/pixel), are really images
with an 8 bit palette or color map (giving a maximum 256 color limit over the
whole image).  The actual pixel data is a 8-bit index value (0-255) which is
then used to look up the color for that pixel from the color table.  That is
the 'raster' (pixel array) is just an index used to lookup the actual pixel
color from a separate table of colors.  </P>

In other words while an 8-bit images also have a 8 bit depth, the 8-bit is
an index into a color lookup table and not an actual color.  GIF images are
a good example of this. </P>

Transparency in such images are usually handled either by specifying
a specific color as representing transparency (set using the  "<CODE><A
HREF="../option_link.cgi?transparent-color" >-transparent-color</A></CODE>"
meta-data setting) as in <A HREF="../formats/#gif" >GIF</A> format, or using
a special profile for a specific number of colors in the color table, (as used
by some <A HREF="../formats/#png_formats" >PNG8</A> images (which is also
a color imaged image like GIF). </P>

In general...
<DL>
<DD>24 bit images are : 3 x 8 bit values - 3 color channels only
<DD>32 bit images are : 4 x 8 bit values - 3 colors + Alpha channel
<DD>8 bit images are : 8 bit color indexed image, with a 256 color limit
</DL></P>

Because most image formats only save color values at an 8 bit/value depth,
a lot of people have installed IM using a 'Q' or Quality level of depth 8,
which requires far less memory and processes images faster than a more normal
Q16 version of IM.  Often 3 or more times faster.  These Q8 versions work well
for general image processing (cropping etc) and converting between formats,
and can also work well for generating simple images, annotating, or overlaying
images. </P>

However while a low quality IM is faster and more memory efficient, it does
not work work well when you start using complex sequences of operations
involving multiple color changes, resizing, darkening, lightening, gamma or
histogram color correction, etc.. </P>

At Q8 the intermediate images in memory will remain stored as 8 bit quality,
and thus multiple operations will each introduce small incremental color
distortions.  The result can be rounding effects, especially for extreme
colors near white and black.  (see below).  </P>

<BR>

<A NAME="quality"></A>
<H3>Quality - In Memory Bit Quality</H3>

Remember, <I>Quality</I> is a compile time setting in ImageMagick, and is used
to determine the size of the values use to store images in IM memory and
during processing. It can not be changed, except by re-compiling ImageMagick
from sources. </P>

A 'Q16' ImageMagick (the IMv6 default) thus will use at least twice as much
memory to hold the same amount of image data as a 'Q8' version of ImageMagick,
and depending on your CPU, be a lot slower, though on today's processors that
is not very likely.  Similarly you can compile 'Q32' and 'Q64' versions,
though these are not very common, and are typically only used in very high end
image processing.  Also see the new <A HREF="#hdri" >HDRI</A> compilation
quality option below. </P>

A 'Q16' ImageMagick also allows you to save more bit information for each
pixel value. That is color values are saved as integers ranging in values from
'<CODE>0</CODE>' to '<CODE>2^<I>quality</I>-1</CODE>'.  That last value is
known in IM programming as the current 'QuantumRange' (or the older obsolete
name 'MaxRGB'). </P>

The higher the Quality Setting, used when compiling IM, the more precise the
color values are when storing the image in memory.  That means that if in
processing an image you generate a lot of very small, slight variations in
color, then those variations will be preserved in the in-memory storage of
ImageMagick, and can be used in later processing steps. </P>

Operations such as resizing, noise filters, blurring, sharpening, averaging,
global color, gamma, and histogram modifications, or lots of complex image
composition operations, can all produce unwanted color errors in a Q8 IM,
creating very distinct color artifacts on the resulting image. </P>

Of course saving the final image to a 8 bit 'depth' image format will
'quantize' those color values back to 8 bit, but during the processing of the
image in memory, the intermediate quality of the image is preserved. </P>

Some formats are available that preserve the higher quality level information
used by IM.  For example the <A HREF="../files/#miff" >MIFF</A> IM format, the
enumerated pixel <A HREF="../files/#txt" >TXT</A> format, as well as the <A
HREF="../formats/#netpbm" >NetPBM</A> image formats. </P>

However while a Q8 version of IM it will let you output a 16 bit depth images,
such image will still only have information equivalent to 8 bit depth as the
quality is just not present in memory, to be saved.  </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  If IM reads an image using 8 bit values (many image formats do), the images
  'depth' will be set to 8 bit, and when saved IM will normally save the image
  at that same 8 bit value depth, even if  you process the image using a Q16
  version of IM. You can override this setting or clearing the "<CODE><A
  HREF="../option_link.cgi?depth" >-depth</A></CODE>" setting for that image,
  so IM will save it at the best depth posible for the image to match the IM
  in-memory quality. </P>

  Also note that many operators that generate extra colors such as <A
  HREF="../resize/" >Image Resizing</A>, will also reset the 'depth' of the
  image in memory to the compile time quality setting, so that IM will then
  try to save it at a higher depth, if possible. </P>

</I></FONT></TD></TR></TABLE></P>

<A NAME="hdri"></A>
<H3>HDRI - floating point quality</H3>

HDRI, or <A HREF="http://en.wikipedia.org/wiki/High_dynamic_range_imaging"
>High Dynamic Range Imaging</A>, was originally designed to more naturally
represent our eyes ability to see both bright and dark areas of a scene
simultaneously.  In practical image processing terms it does a lot more than
that. </P>

Basically a HDRI version of IM is specially compiled to use a floating point
values for images stored in memory, to allow you to perform more exact HDRI
handling of image operations, so as to prevent such operations 'clipping' the
image colors at the extremes. </P>

The HDRI still uses same color range as the default compile-time <A
HREF="#quality" >Quality Setting</A> for in memory storage. That is values
still range from '<CODE>0</CODE>' to the 'Quantum Range' as meaning black to
white. But the values are saved using floating point ('<CODE>doubles</CODE>'
in C programming terms) rather than integers, so that the 'quantum' effects
from rounding off values into integers will not be seen.  The values are also
not 'clipped' when the values go beyond the 'Quantum Range' or into negatives.
Basically you loose far less information between processing steps. </P>

HDRI is thus <I>vital</I> when you plan to use extremely heavy mathematical
processing of images, involving the temporary use of negative values, or
strong scaling to very small or very large values.  It is especially important
for users that want to make full use of <A HREF="../fourier/" >Fast Fourier
Transforms (FFT)</A> capabilities, and it is here that you will see the most
examples of a HDRI version of IM, in these pages. </P>

For information of compiling a HDRI version of IM see <A
HREF="http://magick.imagemagick.org/script/high-dynamic-range.php" >Enabling
HDRI in ImageMagick</A> on the main IM website, also for Windows and Ubuntu
Linux specific information see <A HREF="../forum_link.cgi?f=4&t=14251"
>Fourier Transforms Announcement Discussion</A> on the user forums. </P>

One important operator that should be kept in mind when using HDRI is
"<CODE><A HREF="../option_link.cgi?clamp" >-clamp</A></CODE>".  This option
will clip the values in an image that fall outsize the normal range for
images.  That is any negative value will be clipped to zero, and any value
larger than 'QuantumRange' will be set to that value.  It does NOT however
'round off' the floating-point values into integers. </P>


<A NAME="quantum_effects"></A>
<H4>Quantum Effects, HDRI vs non-HDRI</H4>

<B>Quantum Rounding...</B> </P>

For example here I use the <A HREF="../color_mods/#level" >Level</A> and the
<A HREF="../color_mods/level_plus" >Reverse Level</A> operators to compress
the color range of a gradient image down so they only use the values from 0 to
15, then un-compress it again.  The resulting gradient is also displayed as an
image profile (using the script "<CODE><A
HREF="../scripts/im_profile">im_profile</A></CODE>") to make it easier to
follow.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  # Using a normal non-HDRI version of IM...
  magick -size 20x600 gradient:  -rotate 90 \
          +level 0,15  -level 0,15  level_rounding.png
  im_profile -s level_rounding.png  level_rounding_pf.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="level_rounding_pf.gif"
     ><IMG SRC="level_rounding_pf.gif"    WIDTH=150 HEIGHT=100
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE>
<DIV ALIGN=center>
  <A HREF="level_rounding.png"
     ><IMG SRC="level_rounding.png"      WIDTH=600  HEIGHT=20
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

Notice the sever rounding (quantum effects) that is now visible, forming steps
in the gradients profile.  As only 16 gray-level values were used, you
effectively converted the image to a color depth of only 4 bits! </P>

Note that this type of Quantum Rounding problem becomes very common in an IM Q8
version, just by doing multiple image processing tasks, beyond a basic resize,
and cropping of images.  Something that the more normal IM Q16 solves with its
extra memory usage. </P>

Quantum Rounding only becomes a problem for IM Q16 when you use really heavy
image processing such as, <A HREF="../fourier/" >Fast Fourier Transforms
(FFT)</A> or merging of images containing different exposure times (light
intensity) to generate High Dynamic Range Images.  This is after all why HDRI
was added to ImageMagick in the first place. </P>


<B>Burning and Clipping...</B> </P>

And here I 'stretch' the gradient so that the original black and white color
values go well beyond the "Quantum Range", before being restored again.

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  # Using a normal non-HDRI version of IM...
  magick -size 20x600 gradient:  -rotate 90 \
          -level 20%  +level 20%    level_clipping.png
  im_profile -s level_clipping.png  level_clipping_pf.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="level_clipping_pf.gif"
     ><IMG SRC="level_clipping_pf.gif"    WIDTH=150 HEIGHT=100
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE>
<DIV ALIGN=center>
  <A HREF="level_clipping.png"
     ><IMG SRC="level_clipping.png"      WIDTH=600  HEIGHT=20
           ALIGN=middle VSPACE=5 HSPACE=5 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

You can see that a normal IM looses the information at both ends.  The lower
end values gets 'burned' as values become negative, while the upper values
become 'clipped' as they go beyond the maximum 'Quantum Range' limits of the
integers used to store the values. </P>

<B>HDRI version of ImageMagick</B> result... </P>

Repeating these two operations using a HDRI version of ImageMagick will not
produce any of the above rounding, burning, or clipping of the results, but
will have an extra cost in terms of memory (doubles need more space than
integers).  </P>

Speed wise, it does not cost much, and may actually even be faster on many of
today's modern computer hardware, due to floating point accelerators.

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE HDRI>
  # Using HDRI version of IM...
  magick -size 20x600 gradient:  -rotate 90 \
          +level 0,15  -level 0,15  level_rounding_hdri.png
  magick -size 20x600 gradient:  -rotate 90 \
          -level 20%  +level 20%    level_clipping_hdri.png
  im_profile -s level_rounding_hdri.png  level_rounding_hdri_pf.gif
  im_profile -s level_clipping_hdri.png  level_clipping_hdri_pf.gif
</samp></pre></TD></TR></TABLE>
  <A HREF="level_rounding_hdri_pf.gif"
     ><IMG SRC="level_rounding_hdri_pf.gif"   WIDTH=150 HEIGHT=100
           ALIGN=middle VSPACE=2 HSPACE=25 BORDER=1 ALT="[IM Output]"></A>
  <A HREF="level_clipping_hdri_pf.gif"
     ><IMG SRC="level_clipping_hdri_pf.gif"   WIDTH=150 HEIGHT=100
           ALIGN=middle VSPACE=2 HSPACE=25 BORDER=1 ALT="[IM Output]"></A>
</DIV></P>

As you can see the gradient remains perfectly intact, even after heavy
compression or stretching of the image and back again. </P>


<A NAME="clamp"></A>
<H4>Clamp to Enforcing image bounds in HDRI</H4>

You can force HDRI image to be 'clipped' by the normal image value range
by using "<CODE><A HREF="../option_link.cgi?clamp" >-clamp</A></CODE>"
between the two level options.   For example...

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 width="100%">
<TR><TD width="100%" ALIGN=justify>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="100%" bgcolor="#f8f8f8">
<TR><TD><PRE><CODE EXECUTE HDRI>
  # Using a HDRI version of IM...
  magick -size 20x600 gradient:  -rotate 90 \
          -level 20%    -clamp   +level 20%   level_hdri_clamp.png
  im_profile -s level_hdri_clamp.png  level_hdri_clamp_pf.gif
</samp></pre></TD></TR></TABLE></TD><TD>
  <A HREF="level_hdri_clamp_pf.gif"
     ><IMG SRC="level_hdri_clamp_pf.gif"    WIDTH=150 HEIGHT=100
           ALIGN=middle VSPACE=0 HSPACE=5 BORDER=0 ALT="[IM Output]"></A>
</TD></TR></TABLE>
</DIV></P>

The use of "<CODE><A HREF="../option_link.cgi?clamp" >-clamp</A></CODE>" in
the above basically generated the same image as what I would have got with
a normal non-HDRI version of ImageMagick. </P>

However this image would not be exactly the same as a non-HDRI result, as
while "<CODE><A HREF="../option_link.cgi?clamp" >-clamp</A></CODE>" will burn
and clip the values in the image, it does not add quantum rounding effects. As
such the values are only being rounded off to integers during the final save
to a non-HDRI image file format.  </P>

The "<CODE><A HREF="../option_link.cgi?clamp" >-clamp</A></CODE>" option can
be vitally important when using HDRI, to achieve the result you are wanting.
</P>

<!--
  See notes on correct floating point rounding
  https://imagemagick.org/discourse-server/viewtopic.php?f=3&t=16157&p=58377#p58377
-->


<A NAME="hdri_formats"></A>
<H4>HDRI File Formats</H4>

Of course saving an image that contains very small, large or negative values
into a normal image file format will also be clipped, quantized, and even
color reduced, for the same reasons as above.  As such if you need to save
images that have not been 'normalized' back into a 0 to 'Quantum Range' scale,
then you will need to use one of the rare floating point image file formats.
</P>

Some image formats that can handle floating point values (without clipping or
rounding) include, <A HREF="../formats/#netpbm" >NetPBM PFM</A>. This is the
only image file format that does not require any extra special options. </P>

<BR>

Other image file formats can also be used, but require a special switch to
specify that the file is to save floating point values. </P>

Specifically you need to specify the coder option  "<CODE><B>-define
quantum:format=floating-point</B></CODE>" to request floating point values in
these file formats. </P>

The "<CODE>-depth</CODE>" setting can also be used to define what type of
floating point values are used.  If "<CODE>-depth 32</CODE>" or less (the
default in most versions of IM) is used then normal "floats" are used. But if
"<CODE>-depth 64</CODE>" is set then "doubles" are used for the floating point
data written to, or read from, the image file format. </P>

The image file formats that can use with this special flag to save floating
point values include... <A HREF="../formats/#tiff" >TIFF</A>, FITS, and <A
HREF="../files/#miff" >MIFF</A>.  The raw data file format <A
HREF="../formats/#rgb" >RGB</A> will also save (and read) floating point,
though that format does not save image size, and you need to specify the
floating point settings for reading too.  </P>

<BR>

Another special coder option is is "<CODE>-define
quantum:scale=65535.0</CODE>".  This will be multiplied with value read from
the image file, so as to scale the value from a normalized floating point
value of 0.0 to 1.0, into the internal value range of  0.0 to 65535.0.  So if
you get a near pure black image when reading a floating point image, try
adding this option to scale the values being read into the appropriate range.
</P>

<BR>

The direct memory-to-disk file format <A HREF="../files/#mpc" >MPC</A>, will
also save floating point values used by a HDRI version of IM, and will not
need any special flags.   But as with any <A HREF="../files/#mpc" >MPC</A>
image file, only the exact same version (specific compilation) of IM on the
same machine will correctly read such a file. As such it is only good for
temporary 'quick read' files for scripted image processing, and not for long
term storage. </P>

<A NAME="quality_best"></A>
<H3>What Q-level should I use</H3>

In summery what type of ImageMagick should I use? Q8, Q16, HDRI? </P>

<B>Q8</B> has a smaller memory foot print, as image values are saved in memory
as 8 bit values, just like most image file formats. For basic composition,
image format conversion, simple 'once off resize', or drawing on images, then
Q8 is 'good enough'. </P>

<B>Q16</B> doubles the memory foot print as color values are saved in 16 bit
values (higher precision). But if you plan on doing heavy image processing
involving many levels of operations, such as 'color space changed (even just
sRGB to/from RGB), resize, distortions, blurring, shadows, etc etc all to the
same image, in the same command (which is recommended for the same reason),
then having 16bit is better as it will preserves the lower precision of the
images between processing steps. You can also then save in 16bit file formats
(PNG, MIFF, PbmPlus) between commands, even if the final save is back to
a 8bit image file format like ICO and JPEG. (This is the default for this
reason) </P>

The next level is <B>Q16 HDRI</B>, that takes precision to 32 bit floating
point values which allows you to deal with image values that become very small
or very large without the rounding and clipping effects of images.  You can
even deal with negative values, especially in some colorspaces.  Essentially
it is used to prevent image data loss when processing images in extremes such as
when using HDRI images, Fourier Transforms, or just high levels of
compression, expansion you may get in mathematical processing of raw data.
</P>

That is it in a nut shell. Q16 is good middle ground for most operations
involving distortions and multi-image compositions and image processing
effects. Q8 if memory is tight but you are only doing simple operations, HDRI
is you are doing extreme operations. </P>

<A NAME="density"></A>
<H3>Image Density or Resolution</H3>

The <I>Density</I> of an image is the spatial (space) resolution of the image.
That is the density (generally expressed as dpi, or dots per inch) of an image
define how far apart (or how big) the individual pixels, and thus the overall
size of the image in real world terms, and generally used for display or
printing of the image on a real world device. </P>

It is just some number stored with the image to tell output devices such as
printers and displays how many dots (or pixels) per inch the image should be
displayed at, OR for vector formats like postscript, PDF, MWF, and SVG the
pixel scale to draw using any real world coordinates that may be used within
the image. </P>

It is completely irrelevant to the actual images pixel size, or the in-memory
<A HREF="#quality" >Quality</A> and save file format <A HREF="#depth"
>Depth</A> that defines the color 'resolution' of the image.

You can set the resolution or density of an image as it is being read into IM
by using the  "<CODE><A HREF="../option_link.cgi?density" >-density</A></CODE>"
function, <I>before</I> reading or writing the image, or using "<CODE><A
HREF="../option_link.cgi?set" >-set</A> density</CODE>" after reading the
image. </P>

A "<CODE><A HREF="../option_link.cgi?units" >-units</A></CODE>" setting can be
used to define if the density number is expressed in the default (traditional
printing) terms of '<CODE>PixelsPerInch</CODE>' or in more modern metric units
of '<CODE>PixelsPerCentimeter</CODE>' (PNG uses the latter).  </P>

For example, a 200x200 pixel image at 600 dpi will thus be displayed in 1/3
inch square in real world terms.  On the other hand a much smaller 72x72 pixel
image at 72 dpi will display in a 1 inch square, in the real world, though its
spatial quality will not be very good in comparison. The former being 'photo
quality' while the later being 'display resolution'. </P>

In practical terms, a 72dpi image will look 'digital' or 'dotty' on a printer.
On the other hand a large modern digital photo taken at 1200dpi image would
probably need to be <A HREF="../resize/#resample" >resampled</A> to show it on
a display, or you may only see tiny part of the image.  </P>

For more information on Resolution and Density of images see the notes on the
<A HREF="../resize/#resample" >Resample Resize Operator</A>. For information
of Resolution and Density for Text and Fonts see <A HREF="../text/#pointsize"
>Pointsize and Actual Font Size</A>.  </P>


<A NAME="density_photoshop"><A>
<H4>Photoshop and Density</H4>

The "Photoshop" image editor saves an extra copy of the images resolution into
a separate profile (named '<CODE>8BIM</CODE>') in the image, which IM will NOT
touch.  Thus if you change the resolution of an image with IM, you probably
should also strip the profiles from the image before loading it back into
"photoshop", or you may not see any density changes.</P>

You can remove just that profile from an image using "<CODE>+profile
8bim</CODE>".  </P>

From a <A HREF="../forum_link.cgi?f=1&t=14257&p=49222" >IM Forum
Discussion</A>, Jesper Nilsson (aka <I><A HREF="../forum_link.cgi?u=10743"
>stroker</A></I>), suggests that you use the program "<CODE><A
HREF="http://www.sno.phy.queensu.ca/~phil/exiftool/" >exiftool</A></CODE>' to
directly modify the <A
HREF="http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Photoshop.html"
>Photoshop Tags</A> of the image. </P>

For example
<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  exiftool -g -Photoshop:XResolution=300 -Photoshop:YResolution=300 file.tif
</samp></pre></TD></TR></TABLE>
</DIV></P>


<A NAME="speed"><A>
<H4>Speed Tests based on Quality</H4>

Some speed tests were submitted to <A
HREF="../forum_link.cgi?f=1&t=26011&p=114168" >IM Forum, Q8 vs. Q16 speed (&
HDRI)</A>. </P>

Rough results from the above article <UL>
<LI> The amount of memory used per pixel per channel is as you would expect.
     Q8 - 1 byte,  Q16 - 2 bytes,  Q32 &amp; any HDRI - 4 bytes, Q64 (HDRI)
     -  8 bytes.
<LI> 64bit has significant precision improvements for floating point
     operations, but so does any other HDRI version of ImageMagick.
<LI> Speed wise Q8, Q16 and HDRI all about the same speed (presuming
     computer has floating point MPU),  Q32 about 25% slower and Q64 (HDRI) is
     about 50% slower.
</UL>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/reminder.gif" WIDTH=20 HEIGHT=16
    ><IMG SRC="../img_www/space.gif"   WIDTH=20 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  Note that Q64 automatically uses "double long floats", rather than 64 bit
  integers.  It is sort of a double precision HDRI, but while very precise is
  the slowest of all in-memory quality settings, and most memory intensive.
</I></FONT></TD></TR></TABLE></P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/warning.gif"  WIDTH=28 HEIGHT=28
    ><IMG SRC="../img_www/space.gif"   WIDTH=12 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  The actual speed will depend on your computer specifications, and if you
  have a Math Co-Processor or not.  If it is not important using the default
  Q16, or standard HDRI, is probably best. </P>

  If it is important then you should do simular tests for speed, on your
  equipment, but using the operations you typically expect to use in your
  image processing. </P>

</I></FONT></TD></TR></TABLE></P>


<HR><!-- ---------------------------------------------------------------- -->

<A NAME="controls"></A>
<H2>ImageMagick Special Controls</H2>

IM also has a few special options that it uses to control its operational
working, information reporting, and for debugging purposes.

<TABLE>
<TR valign="top"><TD><A NAME="version"></A>
    <B>-version</B></TD>
<TD>Output what version of IM, the image quality it is using,
    and when was it built. </P>

    IM will implicitly exit after outputting this information.
    </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/warning.gif"  WIDTH=28 HEIGHT=28
    ><IMG SRC="../img_www/space.gif"   WIDTH=12 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  In IMv7, "<CODE><A HREF="../option_link.cgi?version" >-version</A></CODE>"
  will exit if it is the ONLY option on the command line. That is it will make
  the final 'implicit write' argument, optional.  If any other arguments are
  present, OR it was read from a script (file or pipeline), the magick command
  will not exit, but continue.
</I></FONT></TD></TR></TABLE></P>


&nbsp;</TD></TR>
<TR valign="top"><TD><A NAME="list"></A>
    <B>-list</B></TD>
<TD>This is an informational option only and will list the requested
    items, then exit.  That is you can not use this with any other
    option, or image processing.  It is purely provides for
    informational purposes, especially in scripts to check input
    options and if IM has certain options implemented. </P>

    The given argument defines what information you are wanting to list. For
    example a list of '<CODE>color</CODE>' names that you can use, (such as
    using by ("<CODE><A HREF="../option_link.cgi?fill" >-fill</A></CODE>",
    "<CODE><A HREF="../option_link.cgi?background" >-background</A></CODE>",
    "<CODE><A HREF="../option_link.cgi?mattecolor" >-mattecolor</A></CODE>",
    "<CODE><A HREF="../option_link.cgi?bordercolor"
    >-bordercolor</A></CODE>").  While '<CODE>font</CODE>' lists the fonts
    that are specifically known to IM. </P>

    Here are just some of the more interesting lists...
    <TABLE>
    <TR><TD><B>list</B></TD>
        <TD>what lists can "<CODE><A HREF="../option_link.cgi?list"
            >-list</A></CODE>" list!
        </TD></TR>
    <TR><TD><B>font</B></TD>
        <TD>Known fonts (IM also knows about X and PS fonts)
        </TD></TR>
    <TR valign="top">
        <TD><B>type</B></TD>
        <TD>file image types ("<CODE><A HREF="../option_link.cgi?type"
            >-type</A></CODE>" )(after IM v6.3.5-7)
        <BR>or the font list (before that IM version)
        </TD></TR>
    <TR><TD><B>color</B></TD>
        <TD>known color names for various color options.
        </TD></TR>
    <TR><TD><B>dispose</B></TD>
        <TD>all the GIF disposal settings ("<CODE><A
            HREF="../option_link.cgi?dispose" >-dispose</A></CODE>")
        </TD></TR>
    <TR><TD><B>compose</B></TD>
        <TD>alpha compositions are available (includes internal methods)
        </TD></TR>
    <TR><TD><B>layers</B></TD>
        <TD>what multi-image "<CODE><A HREF="../option_link.cgi?layers"
            >-layers</A></CODE>" methods has been implemented
        </TD></TR>
    <TR><TD><B>distort</B></TD>
        <TD>The image distortion methods available.
    <TR><TD><B>morphology</B></TD>
        <TD>The image morphological methods available.
        </TD></TR>
    <TR><TD><B>kernel</B></TD>
        <TD>The morphological/convolution kernels that are available.
        </TD></TR>
    <TR><TD><B>command</B></TD>
        <TD>what command line options (both settings and operators) are
            available
        </TD></TR>
    <TR><TD><B>configure</B></TD>
        <TD>what were the configuration parameters used to build ImageMagick
        </TD></TR>
    </TABLE></P>

    That last 'list' setting '<CODE>Configure</CODE>' is very important, as it
    will tell you what libraries, and delegates were available when IM was
    built.  It also includes the 'point' release number, which was missing
    from the normal "<CODE><A HREF="../option_link.cgi?version"
    >-version</A></CODE>" output of older versions. (See <A
    HREF="../api/#version" >Script Version Handling</A> for one example of
    using this information. </P>

    IM will implicitly exit after outputting this information. </P>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=90% ALIGN=center>
<TR valign="top">
<TD><IMG SRC="../img_www/warning.gif"  WIDTH=28 HEIGHT=28
    ><IMG SRC="../img_www/space.gif"   WIDTH=12 HEIGHT=16></TD>
<TD ALIGN=justify width="100%"><FONT SIZE=-1><I>
  In IMv7, "<CODE><A HREF="../option_link.cgi?list" >-list</A></CODE>"
  will exit if it is the ONLY option on the command line. That is it will make
  the final 'implicit write' argument, optional.  If any other arguments are
  present, OR it was read from a script (file or pipeline), the magick command
  will not exit, but continue.
</I></FONT></TD></TR></TABLE></P>


&nbsp;</TD></TR>
<TR valign="top"><TD><A NAME="verbose"></A>
    <B>-verbose</B></TD>
<TD>Report extra info on some of the more complex operations.
<BR>For example "<CODE><A HREF="../option_link.cgi?segment"
    >-segment</A></CODE>", which outputs a lot of color quantization details.
<BR>And "<CODE><A HREF="../option_link.cgi?distort" >-distort</A></CODE>",
    outputting extra information and 'FX' equivalents to the requested image
    distortion. Also monitoring the number of changes when iterating
    a "<CODE><A HREF="../option_link.cgi?morphology" >-morphology</A></CODE>"
    operation.</P>

    This is especially useful for generating for more detailed image
    information from the "<CODE><A HREF="../files/#info" >info:</A></CODE>"
    and "<CODE><A HREF="../option_link.cgi?identify" >-identify</A></CODE>"
    outputs. </P>

    You can turn off the setting using the 'plus' form of the option,
    "<CODE><A HREF="../option_link.cgi?verbose" >+verbose</A></CODE>". </P>

&nbsp;</TD></TR>
<TR valign="top"><TD><A NAME="regard-warnings"></A>
    <B>-regard<BR>&nbsp;&nbsp;-warnings</B>&nbsp;&nbsp;&nbsp;</TD>
<TD>The '<CODE>-regard-warnings</CODE>', will make some informative warnings
    about some image file formats fatal.  It also causes IM to return a proper
    exit status according to such error conditions. </P>

    It can be used in scripts to 'sanitize' image file being provided
    from uncontrolled sources.  That is this option will make IM fail
    and exit, if when the JPEG or TIFF image was not correct, complete or
    contained 'unknown' profiles. </P>

&nbsp;</TD></TR>
<TR valign="top"><TD><A NAME="precision"></A>
    <B>-precision</B> <I>{number}</I></TD>
<TD>Control the number of significant digits.
<BR>When IM outputs floating point values in response to various debugging,
    verbose, or formatting requests, this setting sets how precise you want
    that output. </P>

    By default it will limit such numbers to 6 significant digits, but this
    operator will increase or decrease this default.  The default setting of
    6 can also be modified using the '<CODE>MAGICK_PRECISION</CODE>'
    environment variable. </P>

    It affects output from... <UL>
    <LI>The verbose "<CODE><A HREF="#identify" >identify</A></CODE>" command
        or the "<CODE><A HREF="../option_link.cgi?identify"
        >-identify</A></CODE>", "<CODE><A HREF="../option_link.cgi?print"
        >-print</A></CODE>" and "<CODE><A HREF="../option_link.cgi?format"
        >-format</A></CODE>" settings.
    <LI>The '<CODE>debug()</CODE>' output from a "<CODE><A
        HREF="../option_link.cgi?fx" >-fx</A></CODE>" operator and the
        '<CODE>%[fx:...]</CODE>' string escape. (See <A
        HREF="../transform/#fx" >FX, DIY Image processing Operator</A>
    <LI>The floating point values of a "<CODE><A
        HREF="../option_link.cgi?morphology" >-morphology</A></CODE>"
        kernel when "<CODE>-set option:showkernel 1</CODE>" has been enabled.
        See <A HREF="../morphology/#showkernel" >Displaying the Kernel</A>.
    </UL> </P>


&nbsp;</TD></TR>
<TR valign="top"><TD><A NAME="quiet"></A>
    <B>-quiet</B></TD>
<TD>Don't report informational warning messages. Only proper errors
    such as I/O errors, or bad options, etc. </P>

    This is especially useful for "<CODE><A HREF="../option_link.cgi?crop"
    >-crop</A></CODE>" or "<CODE><A HREF="../option_link.cgi?trim"
    >-trim</A></CODE>" and "<CODE><A HREF="../option_link.cgi?layers"
    >-layers</A> optimize</CODE>" which normally report 'missed images'
    warnings, when the operator would produce no 'real' image as a result.
    </P>

    This will also quieten the coders of some complex image file formats that
    can contain 'unknown chunks' which IM would normally ignore. For example
    when IM is reading TIFF images, or strange MPEG (AVI) video formats. </P>


&nbsp;</TD></TR>
<TR valign="top"><TD><A NAME="respect-parenthesis2"></A>
    <B>-respect<BR>&nbsp;&nbsp;-parenthesis</B>&nbsp;&nbsp;&nbsp;</TD>
<TD>Causes <A HREF="#parenthesis" >parenthesis</A> to not only to save and
    restore the current image list but also all the current <A HREF="#options"
    >operational settings</A> are saved and restored.  Than means that when
    given, any settings set within parenthesis, will be reset when the
    parenthesis ends.  See the examples in <A HREF="#respect-parenthesis"
    >Parenthesis and Settings</A> above. </P>


&nbsp;</TD></TR>
<TR valign="top"><TD><A NAME="ping"></A>
   <B>-ping</B></TD>
<TD>For the "<A HREF="#identify" >identify</A>" command.  IM will try to avoid
    completely reading and decoding the full image file format for basic
    information such as the images size. </P>


&nbsp;</TD></TR>
<TR valign="top"><TD><A NAME="monitor"></A>
    <B>-monitor</B></TD>
<TD>Report a percentage of processing during each stage of image processing,
    especially for very large or long image processing tasks. </P>

    In a lower level API, you would use SetImageInfoProgressMonitor() or
    SetImageProgressMonitor() </P>


&nbsp;</TD></TR>
<TR valign="top"><TD><A NAME="debug"></A>
    <B>-debug</B></TD>
<TD>Report verbosely exactly what IM is doing, in various areas.  </P>

    The argument is a comma separated list of options, such as...
    <TABLE>
    <TR><TD><B>exception</B></TD>
        <TD>What is IM not understanding about the command
        </TD></TR>
    <TR><TD><B>cache</B></TD>
        <TD>See how much disk space IM is caching
        </TD></TR>
    <TR><TD><B>configure</B></TD>
        <TD>Show IM search attempts to find its configuration files.
        </TD></TR>
    <TR><TD><B>trace</B></TD>
        <TD>Report the trace points at the start of each library function
        </TD></TR>
    <TR valign="top"><TD><B>annotate</B></TD>
        <TD>Report on font metrics when a font is used with "<CODE><A
            HREF="../option_link.cgi?annotate" >-annotate</A></CODE>".
        </TD></TR>
    <TR valign="top"><TD><B>command</B></TD>
         <TD>IMv7 -- show the command line options (or script) as they
             are being processed. EG: option processing.
    <TR valign="top"><TD><B>all</B></TD>
        <TD>Show every trace point during processing
        <BR>This is very very VERY verbose and not recommended
        </TD></TR>
    </TABLE></P>

    If "<CODE><A HREF="../option_link.cgi?debug" >-debug</A></CODE>" is used
    the location of the logging output is controlled by the
    "<CODE>log.xml</CODE>" file.  This is by default set to
    "<CODE>console</CODE>".  To have it save to a file change  <CODE>&lt;log
    output="console"/&gt;</CODE> to <CODE>&lt;log output="file"/&gt;</CODE>
    </P>

    For command line and API usage you can also define an environment variable
    to set the debug level using actions by IM. </P>

<DIV ALIGN=center>
<table class="table table-sm table-hover" CELLSPACING=0 CELLPADDING=5 width="90%" bgcolor="#f8f8f8">
<TR><TD><pre class="bg-light text-dark mx-4"><samp>
  export MAGICK_DEBUG=all
</samp></pre></TD></TR></TABLE>
</DIV></P>

</TD></TR></TABLE></P>

<PRE>
Limiting image size (quick note)

To prevent excess memory usage, set your memory limit to say 16GB. Now set
the disk limit to 4GB. ImageMagick will exit if the disk limit is exceeded,
with a "cache resource exhausted" exception.
</PRE>

</DIV>
<HR><!-- ---------------------------------------------------------------- -->
</div></main><footer class="magick-footer"><div class="container-fluid">
Created: 30 January 2004 <BR>
Updated: 27 September 2017 <BR>
Author: <A HREF="https://antofthy.gitlab.io/anthony.html"
        >Anthony Thyssen</A>, &lt;Anthony.Thyssen&#64;gmail.com&gt;<BR>
Examples Generated with:
        <IMG SRC="version.gif" ALIGN=absmiddle ALT="[version image]"><BR>
URL: <CODE>https://imagemagick.org/Usage/basics/</CODE>
</div></footer></body></HTML>
